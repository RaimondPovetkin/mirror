(function(){var e={5525:function(e,t,a){"use strict";var s=a(9242),i=a(3396);function n(e,t,a,s,n,r){const o=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(o)])}var r={name:"App",components:{}},o=a(89);const l=(0,o.Z)(r,[["render",n]]);var c=l,d=a(2483);function h(e,t,a,s,n,r){const o=(0,i.up)("title-page"),l=(0,i.up)("slider-home");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(o),(0,i.Wm)(l)],64)}var p=a(7139),u=a.p+"img/mir1.a31f46a8.jpg",v=a.p+"img/mir2.7399cfc6.jpg",m=a.p+"img/mir3.9bb5f2fb.jpg",g=a.p+"img/mir4.2ac9f67e.jpg";const f=e=>((0,i.dD)("data-v-1d495ba0"),e=e(),(0,i.Cn)(),e),b={class:"slider text"},w=(0,i.uE)('<div class="title" data-v-1d495ba0>Работы наших креативных клиентов</div><div class="wrapper-block" data-v-1d495ba0><div class="content-row" data-v-1d495ba0><div class="card-item" data-v-1d495ba0><div class="card-image" data-v-1d495ba0><img class="image" src="'+u+'" data-v-1d495ba0></div><div class="card-sign" data-v-1d495ba0>Ольга Иванова г.Москва</div><div class="card-button button" data-v-1d495ba0>ХОЧУ ТАКОЕ ЖЕ</div></div><div class="card-item" data-v-1d495ba0><div class="card-image" data-v-1d495ba0><img class="image" src="'+v+'" data-v-1d495ba0></div><div class="card-sign" data-v-1d495ba0>Ольга Иванова г.Москва</div><div class="card-button button" data-v-1d495ba0>ХОЧУ ТАКОЕ ЖЕ</div></div><div class="card-item" data-v-1d495ba0><div class="card-image" data-v-1d495ba0><img class="image" src="'+m+'" data-v-1d495ba0></div><div class="card-sign" data-v-1d495ba0>Ольга Иванова г.Москва</div><div class="card-button button" data-v-1d495ba0>ХОЧУ ТАКОЕ ЖЕ</div></div><div class="card-item" data-v-1d495ba0><div class="card-image" data-v-1d495ba0><img class="image" src="'+g+'" data-v-1d495ba0></div><div class="card-sign" data-v-1d495ba0>Ольга Иванова г.Москва</div><div class="card-button button" data-v-1d495ba0>ХОЧУ ТАКОЕ ЖЕ</div></div></div></div>',2),x={class:"wrapper-block"},y=(0,i.uE)('<div class="content-row" data-v-1d495ba0><div class="card-item" data-v-1d495ba0><div class="card-image" data-v-1d495ba0><img class="image" src="'+u+'" data-v-1d495ba0></div><div class="card-sign" data-v-1d495ba0>Ольга Иванова г.Москва</div><div class="card-button button" data-v-1d495ba0>ХОЧУ ТАКОЕ ЖЕ</div></div><div class="card-item" data-v-1d495ba0><div class="card-image" data-v-1d495ba0><img class="image" src="'+v+'" data-v-1d495ba0></div><div class="card-sign" data-v-1d495ba0>Ольга Иванова г.Москва</div><div class="card-button button" data-v-1d495ba0>ХОЧУ ТАКОЕ ЖЕ</div></div><div class="card-item" data-v-1d495ba0><div class="card-image" data-v-1d495ba0><img class="image" src="'+m+'" data-v-1d495ba0></div><div class="card-sign" data-v-1d495ba0>Ольга Иванова г.Москва</div><div class="card-button button" data-v-1d495ba0>ХОЧУ ТАКОЕ ЖЕ</div></div><div class="card-item" data-v-1d495ba0><div class="card-image" data-v-1d495ba0><img class="image" src="'+g+'" data-v-1d495ba0></div><div class="card-sign" data-v-1d495ba0>Ольга Иванова г.Москва</div><div class="card-button button" data-v-1d495ba0>ХОЧУ ТАКОЕ ЖЕ</div></div></div>',1),C={class:"wrapper-block appear"},_=(0,i.uE)('<div class="content-row" data-v-1d495ba0><div class="card-item" data-v-1d495ba0><div class="card-image" data-v-1d495ba0><img class="image" src="'+u+'" data-v-1d495ba0></div><div class="card-sign" data-v-1d495ba0>Ольга Иванова г.Москва</div><div class="card-button button" data-v-1d495ba0>ХОЧУ ТАКОЕ ЖЕ</div></div><div class="card-item" data-v-1d495ba0><div class="card-image" data-v-1d495ba0><img class="image" src="'+v+'" data-v-1d495ba0></div><div class="card-sign" data-v-1d495ba0>Ольга Иванова г.Москва</div><div class="card-button button" data-v-1d495ba0>ХОЧУ ТАКОЕ ЖЕ</div></div><div class="card-item" data-v-1d495ba0><div class="card-image" data-v-1d495ba0><img class="image" src="'+m+'" data-v-1d495ba0></div><div class="card-sign" data-v-1d495ba0>Ольга Иванова г.Москва</div><div class="card-button button" data-v-1d495ba0>ХОЧУ ТАКОЕ ЖЕ</div></div><div class="card-item" data-v-1d495ba0><div class="card-image" data-v-1d495ba0><img class="image" src="'+g+'" data-v-1d495ba0></div><div class="card-sign" data-v-1d495ba0>Ольга Иванова г.Москва</div><div class="card-button button" data-v-1d495ba0>ХОЧУ ТАКОЕ ЖЕ</div></div></div>',1),k=[_],I=f((()=>(0,i._)("div",{class:"trigger"},null,-1)));function P(e,t,a,n,r,o){return(0,i.wg)(),(0,i.iD)("div",b,[w,(0,i._)("div",x,[(0,i.Uk)((0,p.zw)(e.count)+(0,p.zw)(e.ddd)+" ",1),y]),(0,i.wy)((0,i._)("div",C,k,512),[[s.F8,e.count]]),I])}var M={name:"HelloWorld",data:()=>({count:0,observer:null,row1:[{name:"Ольга Иванова г.Москва",img:"../assets/collection/mir1.jpg",path:"",price:""},{name:"Ольга Иванова г.Москва",img:"../assets/collection/mir2.jpg",path:"",price:""},{name:"Ольга Иванова г.Москва",img:"../assets/collection/mir3.jpg",path:"",price:""},{name:"Ольга Иванова г.Москва",img:"../assets/collection/mir4.jpg",path:"",price:""}]}),watch:{count(){console.log(document)}},props:{msg:String},computed:{},mounted(){this.observer=new IntersectionObserver(this.returnOnEntry(),{threshold:[.9]}),this.observer.observe(document.getElementsByClassName("trigger")[0])},methods:{returnOnEntry(){let e=this;return function(t){t.forEach((t=>{t.isIntersecting&&e.count++}))}}}};const j=(0,o.Z)(M,[["render",P],["__scopeId","data-v-1d495ba0"]]);var S=j;const A=e=>((0,i.dD)("data-v-587fa017"),e=e(),(0,i.Cn)(),e),E={class:"video-container"},D={class:"caption"},W={class:"title_container text"},R=(0,i.uE)('<div class="first-word" data-v-587fa017>Белое зеркало</div><div class="second-row" data-v-587fa017><span class="second-word" data-v-587fa017>Создай своё </span>  <span class="third-word" data-v-587fa017> уникальное зеркало</span></div><div class="second-row" data-v-587fa017><span class="description" data-v-587fa017>Нарисуй форму, выбери раму, цвет и крепление. А мы приедем и установим его в удобное время</span>  </div>',3),T={class:"second-row"},z=A((()=>(0,i._)("button",{class:"button"},"СОЗДАТЬ",-1)));function H(e,t,a,n,r,o){const l=(0,i.up)("router-link"),c=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)("div",E,[(0,i._)("div",D,[(0,i._)("div",W,[R,(0,i._)("div",T,[(0,i.Wm)(l,{to:"/draw"},{default:(0,i.w5)((()=>[z])),_:1})]),(0,i.Wm)(s.uT,{name:"slide-fade"},{default:(0,i.w5)((()=>[(0,i.Wm)(c)])),_:1})])])])}var L={name:"TitlePage",methods:{goDraw(){}}};const O=(0,o.Z)(L,[["render",H],["__scopeId","data-v-587fa017"]]);var F=O,B={name:"FirstPage",components:{TitlePage:F,sliderHome:S}};const $=(0,o.Z)(B,[["render",h]]);var N=$;const U={style:{width:"100%",height:"100%",display:"flex"}},Z=(0,i._)("button",{class:"button-home"},"Белое зеркало",-1),Y={style:{height:"100vh",width:"100%"}},V=(0,i._)("h3",{text:"2xl",justify:"center"},"333",-1);function G(e,t,a,s,n,r){const o=(0,i.up)("router-link"),l=(0,i.up)("master-paper"),c=(0,i.up)("el-carousel-item"),d=(0,i.up)("main-wrap"),h=(0,i.up)("el-carousel");return(0,i.wg)(),(0,i.iD)("div",U,[(0,i.Wm)(o,{to:"/"},{default:(0,i.w5)((()=>[Z])),_:1}),(0,i._)("div",Y,[(0,i.Wm)(h,{ref:"carousel",style:{height:"100%"},direction:"vertical",autoplay:!1},{default:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Wm)(l,{onChangeIndex:r.setActiveItem,onSetPathCurveExternal:r.setPathCurveExternal,externalPathCurveCall:e.externalPathCurveCall},null,8,["onChangeIndex","onSetPathCurveExternal","externalPathCurveCall"])])),_:1}),(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Wm)(d,{onChangeIndex:r.setActiveItem,onExternalPath:r.externalPathCall,pathCurve:e.pathCurve,pathCurveExternal:e.pathCurveExternal},null,8,["onChangeIndex","onExternalPath","pathCurve","pathCurveExternal"])])),_:1}),(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[V])),_:1})])),_:1},512)])])}var J=a.p+"img/frame1.561435d6.png",q=a.p+"img/frame2.eb95a4d3.png",X=a.p+"img/frame3.9909d761.png";const K=e=>((0,i.dD)("data-v-0db863e1"),e=e(),(0,i.Cn)(),e),Q={class:"frame-content-wrap"},ee=K((()=>(0,i._)("img",{class:"menu-image",src:J},null,-1))),te=[ee],ae=K((()=>(0,i._)("img",{class:"menu-image",src:q},null,-1))),se=[ae],ie=K((()=>(0,i._)("img",{class:"menu-image",src:X},null,-1))),ne=[ie],re={key:0,class:"preload"},oe=K((()=>(0,i._)("div",{id:"container"},null,-1)));function le(e,t,a,s,n,r){const o=(0,i.up)("el-button"),l=(0,i.up)("el-popover");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("button",{class:"button-form",onClick:t[0]||(t[0]=(...e)=>r.toDrawPage&&r.toDrawPage(...e))},"форма "),(0,i.Wm)(l,{ref:"popoverFrame",placement:"left-start",title:"Title",width:150,trigger:"click",content:"this is content, this is content, this is content"},{reference:(0,i.w5)((()=>[(0,i.Wm)(o,{class:"button-frame"},{default:(0,i.w5)((()=>[(0,i.Uk)("Рама")])),_:1})])),default:(0,i.w5)((()=>[(0,i._)("div",Q,[(0,i._)("div",{class:"frameIMG",style:(0,p.j5)(0==n.frameIndex?"background-color: #7a7b81":""),onClick:t[1]||(t[1]=(...e)=>r.setFrame1&&r.setFrame1(...e))},te,4),(0,i._)("div",{class:"frameIMG",style:(0,p.j5)(1==n.frameIndex?"background-color: #7a7b81":""),onClick:t[2]||(t[2]=(...e)=>r.setFrame2&&r.setFrame2(...e))},se,4),(0,i._)("div",{class:"frameIMG",style:(0,p.j5)(2==n.frameIndex?"background-color: #7a7b81":""),onClick:t[3]||(t[3]=(...e)=>r.setFrame3&&r.setFrame3(...e))},ne,4)])])),_:1},512),(0,i._)("button",{class:"button-fastening",onClick:t[4]||(t[4]=(...e)=>r.fastening&&r.fastening(...e))},"крепление"),(0,i._)("button",{class:"button-ordering",onClick:t[5]||(t[5]=t=>e.$emit("changeIndex",2))},"оформление"),n.preloader?((0,i.wg)(),(0,i.iD)("div",re,"прелоадер")):(0,i.kq)("",!0),oe],64)}a(7658);var ce=a(1114),de=a(4543),he=a(1273),pe=a(499);let ue,ve,me=!1,ge=0,fe=0;var be={name:"MainWrap.vue",props:{pathCurve:Object},data(){return{frameIndex:0,segments:[],preloader:!0,firstInit:!1,canvas:null,controls:null,camera:"",geometry:"",material:"",selectObject:{},requestID:""}},mounted(){this.pathCurve&&(window.addEventListener("resize",this.onWindowResize,!1),window.addEventListener("click",this.onMouseDblclick,!1),document.getElementById("container").addEventListener("mousemove",this.onMouseMove),document.getElementById("container").addEventListener("mousedown",this.onMouseDown),document.getElementById("container").addEventListener("mouseup",this.onMouseUp))},beforeUnmount(){document.getElementById("container").removeEventListener("resize",this.onWindowResize),document.getElementById("container").removeEventListener("click",this.onMouseDblclick),document.getElementById("container").removeEventListener("mousemove",this.onMouseMoveT),window.cancelAnimationFrame(this.requestID)},watch:{async pathCurve(e){if(e&&!this.firstInit)console.log(e),this.firstInit=!0,await this.init(),window.addEventListener("resize",this.onWindowResize,!1),window.addEventListener("click",this.onMouseDblclick,!1),document.getElementById("container").addEventListener("mousemove",this.onMouseMove),document.getElementById("container").addEventListener("mousedown",this.onMouseDown),document.getElementById("container").addEventListener("mouseup",this.onMouseUp);else if(e&&this.firstInit){this.removeMeshes();const e=ue.getObjectByProperty("type","Reflector");e.geometry.dispose(),e.material.dispose(),ue.remove(e);const t=ue.getObjectByProperty("name","MirorBack");t&&(t.geometry.dispose(),t.material.dispose(),ue.remove(t)),console.log(ue),ve.renderLists.dispose(),await this.createGeometry(!1)}}},methods:{frame3(){this.$emit("externalPath")},toDrawPage(){this.$refs.popoverFrame.hide(),this.$emit("changeIndex",0)},fastening(){this.$refs.popoverFrame.hide(),this.controls.maxAzimuthAngle=1/0,this.controls.minAzimuthAngle=1/0,this.controls.maxPolarAngle=Math.PI,this.controls.minPolarAngle=0,console.log(this.camera);let e=(this.camera.position.x- -30)/100,t=(this.camera.position.y- -16)/100,a=(this.camera.position.z-19)/100,s=0,i=setInterval((()=>{this.camera.position.x-=e,this.camera.position.y-=t,this.camera.position.z-=a,s++,100==s&&window.clearInterval(i)}),10)},rotateScene(){},onMouseMove(e){if(me){console.log("move"),e.preventDefault();var t=e.clientX-ge,a=e.clientY-fe;ge=e.clientX,fe=e.clientY,this.rotateScene(t,a)}},onMouseDown(e){me=!0,ge=e.clientX,fe=e.clientY},onMouseUp(){me=!1},async init(){ue=new ce.xsS,this.camera=new ce.cPb(45,window.innerWidth/window.innerHeight,1,500),this.camera.up.set(0,-1,0),this.camera.position.z=39,this.camera.position.x=3,this.camera.position.y=-6,await this.createGeometry(),await this.createRender(),this.controls=new de.z(this.camera,this.canvas),this.controls.rotateSpeed=.9,this.controls.zoomSpeed=.9,this.controls.panSpeed=0,this.controls.maxAzimuthAngle=.01,this.controls.minAzimuthAngle=-2.9,this.controls.maxPolarAngle=2,this.controls.minPolarAngle=1,this.controls.enableDamping=!0,this.controls.dampingFactor=.1,this.controls.update(),this.animate(),this.addLight()},addLight(){const e=new ce.cek(16777215);e.position.copy(this.camera.position),e.position.x=-60,e.position.y=20,e.position.z=-5;const t=new ce.cek(16777215);t.position.copy(this.camera.position),t.position.x=60,t.position.y=-80,t.position.z=50,ue.add(t),ue.add(e)},onMouseMoveT(){event.preventDefault()},createGeometry(e=!0){console.log(this.pathCurve);var t=new ce.bnF;t.moveTo(this.pathCurve[0].curve.points[0].x/10,this.pathCurve[0].curve.points[0].y/10);let a=[];for(let l=0;l<this.pathCurve.length-1;l++)a.push(new ce.FM8(this.pathCurve[l].curve.points[3].x/10,this.pathCurve[l].curve.points[3].y/10));t.splineThru(a);const s=new ce.oa8(t,100);let i=new he.r(s,{clipBias:.002,color:8952217});i.position.x=-4.25,i.position.y=-14,i.position.z=8,i.rotation.y=1.57,i.scale.x=.4,i.scale.y=.4,i.scale.z=.4,ue.add(i);let n=new ce.O7d(t,{curveSegments:162,depth:.3,bevelEnabled:!1});var r=new ce.vBJ({color:9871014});let o=new ce.Kj0(n,r);if(o.position.x=-4.4,o.position.y=-14,o.position.z=8,o.rotation.y=1.57,o.scale.x=.4,o.scale.y=.4,o.scale.z=.4,o.name="MirorBack",ue.add(o),this.setFrame1(),e){const e=new pe.L;e.load("../../InteriorTest.obj",(e=>{const t=e;t.position.x=32.5,t.position.y=20,t.scale.x=15,t.scale.y=15,t.scale.z=15,t.rotation.z=Math.PI,ue.add(e),this.preloader=!1,console.log("good")}))}},createRender(){ve=new ce.CP7,ve.setSize(window.innerWidth-30,window.innerHeight),ve.setClearColor(12178431,1);let e=document.getElementById("container");e.appendChild(ve.domElement),this.canvas=ve.domElement},animate(){this.controls.update(),this.requestID=requestAnimationFrame(this.animate),this.render()},render(){ve.render(ue,this.camera)},onWindowResize(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),ve.setSize(window.innerWidth,window.innerHeight)},onMouseDblclick(e){console.log(e);var t=this.getIntersects(e);0!=t.length&&(t[0].object,ce.Kj0)},getIntersects(e){e.preventDefault();var t=new ce.iMs,a=new ce.FM8;a.x=e.clientX/window.innerWidth*2-1,a.y=-e.clientY/window.innerHeight*2+1,t.setFromCamera(a,this.camera);var s=t.intersectObjects(ue.children);return s},removeMeshes(){for(let e=ue.children.length-1;e>=0;e--)"Mesh"===ue.children[e].type&&"MirorBack"!==ue.children[e].name&&(ue.children[e].geometry.dispose(),ue.children[e].material[0].dispose(),ue.children[e].material[1].dispose(),ue.remove(ue.children[e]))},setFrame1(){console.log("333");const e=ue.getObjectByProperty("name","MirorBack");e&&(e.geometry.dispose(),e.material.dispose(),ue.remove(e)),this.removeMeshes(),this.frameIndex=0;var t=new ce.bnF;t.moveTo(this.pathCurve[0].curve.points[0].x/10,this.pathCurve[0].curve.points[0].y/10);let a=[];for(let c=0;c<this.pathCurve.length-1;c++)a.push(new ce.FM8(this.pathCurve[c].curve.points[3].x/10,this.pathCurve[c].curve.points[3].y/10));t.splineThru(a);const s=new ce.dpR;let i=new ce.O7d(t,{curveSegments:162,depth:3,bevelEnabled:!1}),n=s.load("../../Texture/treeD.jpg");n.wrapS=n.wrapT=ce.rpg,n.repeat.set(.05,.1),n.offset.set(.1,.1),n.rotation=1.55;let r=s.load("../../Texture/treeD.jpg");r.wrapS=r.wrapT=ce.rpg,r.repeat.set(.05,.1),r.offset.set(.1,.01),r.rotation=0;let o=[new ce.xoR({map:n}),new ce.xoR({map:r})],l=new ce.Kj0(i,o);l.position.x=-5.5,l.position.y=-14,l.position.z=8,l.rotation.y=1.57,l.scale.x=.4,l.scale.y=.4,l.scale.z=.4,ue.add(l)},setFrame2(){this.removeMeshes()},setFrame3(){this.removeMeshes(),this.frameIndex=2;const e=new ce.dpR;let t=e.load("../../Texture/treeD.jpg");t.wrapS=t.wrapT=ce.rpg,t.repeat.set(.05,.1),t.offset.set(.1,.1),t.rotation=1.55;let a=e.load("../../Texture/treeD.jpg");a.wrapS=a.wrapT=ce.rpg,a.repeat.set(.05,.1),a.offset.set(.1,.01),a.rotation=0;let s=[new ce.xoR({map:t}),new ce.xoR({map:a})],i=[];i.push(new ce.Pa4(this.pathCurve[0].curve.points[0].x/10,this.pathCurve[0].curve.points[0].y/10,0));for(let d=0;d<this.pathCurve.length-1;d++)i.push(new ce.Pa4(this.pathCurve[d].curve.points[1].x/10,this.pathCurve[d].curve.points[1].y/10,0));i.push(new ce.Pa4(this.pathCurve[this.pathCurve.length-1].curve.points[3].x/10,this.pathCurve[this.pathCurve.length-1].curve.points[3].y/10,0)),i.push(new ce.Pa4(this.pathCurve[1].curve.points[1].x/10,this.pathCurve[1].curve.points[1].y/10,0));const n=new ce.YT8(i),r={steps:1400,bevelEnabled:!0,bevelThickness:1,bevelSegments:10,bevelSize:1,extrudePath:n};let o=new ce.bnF;o.moveTo(-1,-.8),o.lineTo(-1,1),o.lineTo(1.5,1),o.lineTo(1.5,-1),o.lineTo(-.8,-1),o.lineTo(-.9,-.95),o.lineTo(-.95,-.9);const l=new ce.O7d(o,r),c=new ce.Kj0(l,s);c.position.x=-4.5,c.position.y=-14,c.position.z=8,c.rotation.y=1.57,c.scale.x=.4,c.scale.y=.4,c.scale.z=.4,ue.add(c)}}};const we=(0,o.Z)(be,[["render",le],["__scopeId","data-v-0db863e1"]]);var xe=we;const ye={class:"row",style:{"margin-top":"50px"}},Ce=(0,i._)("div",{class:"col-2"},null,-1),_e={class:"col-8"},ke=(0,i._)("div",{class:"col-2"},null,-1);function Ie(e,t,a,s,n,r){const o=(0,i.up)("canvas-paper");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",ye,[Ce,(0,i._)("div",_e,[(0,i.Wm)(o,{clear:e.clear,dragMode:!e.canDraw,onClearCanvas:r.reset,onClearSimp:r.clearSimp,"canvas-id":"canvas-one",ref:"childCanvas",onClearHandler:r.clearHandler,onNextButton:r.changeIndex,onSetPathCurveExternal:r.setPathCurveExternal,externalPathCurveCall:a.externalPathCurveCall},null,8,["clear","dragMode","onClearCanvas","onClearSimp","onClearHandler","onNextButton","onSetPathCurveExternal","externalPathCurveCall"])]),ke])])}const Pe=e=>((0,i.dD)("data-v-6d8c9a35"),e=e(),(0,i.Cn)(),e),Me=Pe((()=>(0,i._)("div",{style:{"margin-top":"15px","margin-bottom":"15px"}},null,-1))),je={style:{display:"flex","justify-content":"center"}},Se={style:{height:"80%",width:"45%"}},Ae=["width","height","id"],Ee={class:"buttons-block"},De={class:"buttons-wrap"},We={style:{display:"flex","flex-direction":"column"}},Re=Pe((()=>(0,i._)("label",{for:"volume"},"СГЛАЖИВАНИЕ",-1))),Te=["disabled"];function ze(e,t,a,n,r,o){const l=(0,i.up)("Delete"),c=(0,i.up)("el-icon"),d=(0,i.up)("el-button"),h=(0,i.up)("Undo"),p=(0,i.up)("Redo"),u=(0,i.up)("ArrowExpand");return(0,i.wg)(),(0,i.iD)(i.HY,null,[Me,(0,i._)("div",je,[(0,i._)("div",Se,[(0,i._)("canvas",{key:"countRerender",width:o.calcWidth(),height:o.calcHeight(),id:a.canvasId,class:"canvas-style",resize:"true",onMousedown:t[0]||(t[0]=(...e)=>o.mouseDown&&o.mouseDown(...e))},null,40,Ae)]),(0,i._)("div",Ee,[(0,i._)("div",De,[(0,i.Wm)(d,{onClick:o.clearPaper,class:"btn-wrap btn-tool"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{size:20,style:{"margin-top":"-5px","margin-right":"3px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(l)])),_:1}),(0,i.Uk)(" ОЧИСТИТЬ")])),_:1},8,["onClick"]),(0,i.Wm)(d,{onClick:o.back,class:"btn-wrap btn-tool"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{size:20,style:{"margin-top":"-5px","margin-right":"3px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(h)])),_:1}),(0,i.Uk)(" НАЗАД ")])),_:1},8,["onClick"]),(0,i.Wm)(d,{onClick:o.forward,class:"btn-wrap btn-tool"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{size:20,style:{"margin-top":"-5px","margin-right":"3px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(p)])),_:1}),(0,i.Uk)(" ВПЕРЁД ")])),_:1},8,["onClick"]),(0,i.Wm)(d,{onClick:o.changeScale,class:"btn-wrap btn-tool"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{size:20,style:{"margin-top":"-5px","margin-right":"3px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(u)])),_:1}),(0,i.Uk)(" МАСШТАБ ")])),_:1},8,["onClick"]),(0,i.Wm)(d,{onClick:o.ttt,class:"btn-wrap btn-tool"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{size:20,style:{"margin-top":"-5px","margin-right":"3px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(u)])),_:1}),(0,i.Uk)(" ttt ")])),_:1},8,["onClick"]),(0,i._)("div",We,[Re,(0,i.wy)((0,i._)("input",{type:"range",id:"volume",name:"volume",min:"2",max:"30",disabled:!a.dragMode||e.fewSegments,"onUpdate:modelValue":t[1]||(t[1]=t=>e.simpValue=t)},null,8,Te),[[s.nr,e.simpValue]])]),(0,i.Wm)(d,{onClick:o.goToDrawPage},{default:(0,i.w5)((()=>[(0,i.Uk)(" NEXT ")])),_:1},8,["onClick"])])])])],64)}var He=a(1796),Le=a(4902),Oe=a(5921),Fe=a(2228);const Be=a(5445);var $e={name:"CanvasPaper",components:{Undo:He.Z,Redo:Le.Z,Delete:Oe.Z,ArrowExpand:Fe.Z},props:{canvasId:String,clear:Boolean,dragMode:Boolean,externalPathCurveCall:Boolean},emits:["clearCanvas","clearSimp","clearHandler","nextButton"],data:()=>({countRerender:1,simpArr:null,pathHistory:[],currentIndex:0,pathExtra:null,scaleMode:!1,strokeScaleNumber:null,cornerScale:null,simpValue:2,fewSegments:!1,segment:null,movePath:!1,path2:null,hitOptions:{segments:!0,stroke:!0,fill:!0,tolerance:10},crossed:!1,loop:0,currentArr:[],crossedArr:[],FinArr:[],startCoord:{x:null,y:null},path:null,scope:null,finishArr:[]}),methods:{ttt(){let e=this.scope.project._children[0]._children[0];console.log("=================================");for(let i=0;i<e.segments.length;i++)console.log(e.segments[i].curve.points);console.log("================================="),console.log("=================================");let t=this.scope.project._children[0]._children[0].segments,a=[];for(let i=0;i<t.length;i++)a.push(t[i]);var s=this.scope.project._children[0]._children[0];s.flatten(.5),this.$emit("setPathCurveExternal",s.segments)},goToDrawPage(){this.scope.project._children[0]._children[0].flatten(1),this.$emit("nextButton",this.scope.project._children[0]._children[0].segments)},toNormalSizeChildren(){for(let e=0;e<this.scope.project._children[0]._children.length;e++)"circle"==this.scope.project._children[0]._children[e].type&&this.scope.project._children[0]._children[e].radius>5?this.scope.project._children[0]._children[e].radius=10:this.scope.project._children[0]._children[e].type||(this.scope.project._children[0]._children[0].strokeWidth=1)},deleteScaleRectangle(){var e=this.scope.project.activeLayer.children;e["csaleRectangle"]&&e["topLeft"]&&e["topRight"]&&e["bottomLeft"]&&e["bottomRight"]&&(e["csaleRectangle"].remove(),e["topLeft"].remove(),e["topRight"].remove(),e["bottomLeft"].remove(),e["bottomRight"].remove())},drawScaleRectangle(){let e=this.scope.project._children[0]._children[0],t=e.bounds;var a=new Be.Rectangle(new Be.Point(t.topLeft.x,t.topLeft.y),new Be.Size(t.width,t.height)),s=new Be.Path.Rectangle(a);s.name="csaleRectangle",s.strokeColor="black",s.dashArray=[10,12];var i=new Be.Shape.Circle(new Be.Point(e.bounds.topLeft.x,e.bounds.topLeft.y),5);i.name="topLeft",i.strokeColor="rgba(0,38,32,0.5)",i.fillColor="rgba(0,255,217,0.2)";var n=new Be.Shape.Circle(new Be.Point(e.bounds.topRight.x,e.bounds.topRight.y),5);n.name="topRight",n.strokeColor="rgba(0,38,32,0.5)",n.fillColor="rgba(0,255,217,0.2)";var r=new Be.Shape.Circle(new Be.Point(e.bounds.bottomLeft.x,e.bounds.bottomLeft.y),5);r.name="bottomLeft",r.strokeColor="rgba(0,38,32,0.5)",r.fillColor="rgba(0,255,217,0.2)";var o=new Be.Shape.Circle(new Be.Point(e.bounds.bottomRight.x,e.bounds.bottomRight.y),5);o.name="bottomRight",o.strokeColor="rgba(0,38,32,0.5)",o.fillColor="rgba(0,255,217,0.2)"},calcHeight(){return document.body.clientWidth/100*42},calcWidth(){let e=document.body.clientWidth/100*64;return document.body.clientWidth-e},deletePathCircles(){while(this.scope.project.activeLayer.children["circlePaht"])this.scope.project.activeLayer.children["circlePaht"].remove()},changeScale(){if(this.scaleMode){this.scaleMode=!1;var e=this.scope.project.activeLayer.children;e["csaleRectangle"].remove(),e["topLeft"].remove(),e["topRight"].remove(),e["bottomLeft"].remove(),e["bottomRight"].remove(),this.drawCircles()}else this.scaleMode=!0,this.deleteScaleRectangle(),this.drawScaleRectangle(),this.deletePathCircles();console.log(this.scope.project)},forward(){this.scaleMode=!1,this.currentIndex<this.pathHistory.length-1&&(this.currentIndex++,this.pathHistory[this.currentIndex]&&this.pathHistory[this.currentIndex].simplify?this.forward():(this.$emit("clearSimp"),self.path=new Be.Path(this.pathHistory[this.currentIndex].data),self.path.strokeColor="black",self.path.fillColor="red",self.path.closed=!0))},drawCircles(){if(!this.scaleMode){let t=this.scope.project._children[0]._children[0];if(t._segments)for(let a=0;a<t._segments.length;a++){var e=new Be.Shape.Circle(new Be.Point(t._segments[a].point.x,t._segments[a].point.y),10);e.strokeColor="rgba(0,38,32,0.5)",e.name="circlePaht",e.fillColor="rgba(0,255,217,0.2)"}t._segments.length>3?this.fewSegments=!1:this.fewSegments=!0}},clearPaper(){this.simpArr=null,this.pathHistory=[],this.currentIndex=0,this.scaleMode=!1,this.simpValue=2,this.$emit("clearHandler")},back(){if(this.scaleMode=!1,this.currentIndex>0)if(this.currentIndex--,this.pathHistory[this.currentIndex-1]&&this.pathHistory[this.currentIndex-1].simplify)this.back();else{let e=this;this.$emit("clearSimp"),e.path=new Be.Path(this.pathHistory[this.currentIndex].data),e.path.strokeColor="black",e.path.fillColor="red",e.path.closed=!0,this.simpValue}},cutCrossings(e){let t=[];for(let r=0;r<this.crossedArr.length;r++){let a=1e4,s=null;for(let t=0;t<e.length;t++){let i=Math.abs(e[t].x-this.crossedArr[r]._point.x),n=Math.abs(e[t].y-this.crossedArr[r]._point.y);n+i<a&&(a=n+i,s=t)}t.push({firstIndex:s,indexCross:r,point:{x:this.crossedArr[r]._point.x,y:this.crossedArr[r]._point.y}}),e[s].cross=!0,e[s].crossIndex=r}for(let r=0;r<this.crossedArr.length;r++){let a=1e4,s=null,i=!0;for(let t=0;t<e.length;t++)if(i=!0,e[t+1]&&e[t+1].cross&&(i=!1),e[t-1]&&e[t-1].cross&&(i=!1),!e[t].cross&&i){let i=Math.abs(e[t].x-this.crossedArr[r]._point.x),n=Math.abs(e[t].y-this.crossedArr[r]._point.y);n+i<a&&(a=n+i,s=t)}e[s]&&(e[s].crossDouble=!0,e[s].crossIndex=r,t.find((e=>e.indexCross==r)).secondIndex=s)}for(let r=0;r<t.length;r++)t[r].count=Math.abs(t[r].firstIndex-t[r].secondIndex);let a=JSON.parse(JSON.stringify(e));a.reverse(),t.push({count:a.indexOf(a.find((e=>void 0!==e.crossIndex)))+e.indexOf(e.find((e=>void 0!==e.crossIndex))),end:e.length-a.indexOf(a.find((e=>void 0!==e.crossIndex)))-1,start:e.indexOf(e.find((e=>void 0!==e.crossIndex)))});let s=1/0,i=null;for(let r=0;r<t.length;r++)t[r].count<s&&(s=t[r].count,i=r);let n=JSON.parse(JSON.stringify(e));i==t.length-1?(console.log("хвостик"),n.splice(0,t[t.length-1].start+1),n.splice(t[t.length-1].end-t[t.length-1].start,1e4)):(console.log("петля"),n.splice(Math.min(t[i].firstIndex,t[i].secondIndex),s+1,t[i].point)),this.FinArr=n,self.path=new Be.Path;for(let r=0;r<this.FinArr.length;r++)self.path.add(new Be.Point(this.FinArr[r].x,this.FinArr[r].y));return self.path.closed=!0,this.crossedArr=self.path.getCrossings(self.path),0==this.crossedArr.length||1==this.crossedArr.length&&this.crossedArr[0]._point.x==this.FinArr[this.FinArr.length-1].x&&this.crossedArr[0]._point.y==this.FinArr[this.FinArr.length-1].y?console.log("last"):(this.loop++,this.cutCrossings(this.FinArr)),n},getCrossIndex(e,t,a){let s=1e4,i=null;for(let n=0;n<e.length;n++){let r=Math.abs(e[n].x-t),o=Math.abs(e[n].y-a);o+r<s&&(s=o+r,i=n)}return i},reset(){this.scope.project.activeLayer.removeChildren()},pathCreate(e){return e.activate(),new Be.Path({strokeColor:"rgb(77,77,77)",strokeJoin:"round",strokeWidth:2})},createTool(e){return e.activate(),new Be.Tool},mouseDown(){let e=this;this.dragMode||(this.path&&(this.path.selected=!1),this.tool=this.createTool(this.scope)),this.tool.onMouseDown=t=>{if(this.strokeScaleNumber=null,this.cornerScale=null,this.dragMode)if(this.scaleMode){this.path2=null;let e=this.scope.project.hitTest(t.point,this.hitOptions);e&&"stroke"==e.type&&"csaleRectangle"==e.item.name&&(this.strokeScaleNumber=e.item.curves.findIndex((t=>t.point1.x==e.location.curve.point1.x&&t.point1.y==e.location.curve.point1.y)),this.path2=this.scope.project._children[0]._children[0]),e&&"fill"==e.type&&(this.path2=e.item);let a=this.scope.project.activeLayer.children.filter((e=>e.name&&"circle"==e.type)),s=null,i=1e4;for(let n=0;n<a.length;n++){let e=Math.abs(t.point.x-a[n].position.x),r=Math.abs(t.point.y-a[n].position.y);r+e<i&&(i=r+e,s=n)}if(i<40){let e=a[s];this.cornerScale=e.name,this.path2=this.scope.project._children[0]._children[0]}this.path2||this.changeScale()}else{this.segment=null,this.path2=null;let e=this.scope.project.hitTest(t.point,this.hitOptions);if(!e)return;if(t.modifiers.shift)return void("segment"==e.type&&e.segment.remove());if(e){if(this.path2=e.item,("fill"==e.type||"circle"==e.item._type)&&(this.path2=this.scope.project._children[0]._children[0],"circle"==e.item._type)){let t=null,a=1e4;for(let s=0;s<this.path2._segments.length;s++){let i=Math.abs(e.item.position.x-this.path2._segments[s].point.x),n=Math.abs(e.item.position.y-this.path2._segments[s].point.y);n+i<a&&(a=n+i,t=s)}this.segment=this.path2._segments[t]}if("segment"==e.type)this.segment=e.segment;else if("stroke"==e.type&&"circle"!=e.item._type){console.log(e);let a=e.location;this.segment=this.path2.insert(a.index+1,t.point)}}this.movePath="fill"==e.type,this.movePath&&this.scope.project.activeLayer.addChild(e.item)}else e.path=e.pathCreate(e.scope),e.path.add(t.point)},this.tool.onMouseMove=e=>{this.toNormalSizeChildren(),this.scope.project.activeLayer.selected=!1;let t=this.scope.project.hitTest(e.point,this.hitOptions);t&&"circle"==t.item.type&&10==t.item.radius?this.scope.project._children[0]._children.find((e=>e.id==t.item.id)).radius=15:t&&"stroke"==t.type&&!this.scaleMode&&(this.scope.project._children[0]._children[0].strokeWidth=3)},this.tool.onMouseDrag=t=>{if(this.deletePathCircles(),this.dragMode)if(this.scaleMode){if(this.cornerScale){switch(this.cornerScale){case"topRight":(t.delta.x>0&&t.delta.y<0||t.delta.x<0&&t.delta.y>0)&&(t.delta.x>0?this.path2.scale(1.02,1):this.path2.scale(.98,1),t.delta.y<0?this.path2.scale(1,1.02):this.path2.scale(1,.98));break;case"topLeft":(t.delta.x>0&&t.delta.y>0||t.delta.x<0&&t.delta.y<0)&&(t.delta.y<0?this.path2.scale(1,1.02):this.path2.scale(1,.98),t.delta.x<0?this.path2.scale(1.02,1):this.path2.scale(.98,1));break;case"bottomRight":(t.delta.x>0&&t.delta.y>0||t.delta.x<0&&t.delta.y<0)&&(t.delta.y>0?this.path2.scale(1,1.02):this.path2.scale(1,.98),t.delta.x>0?this.path2.scale(1.02,1):this.path2.scale(.98,1));break;case"bottomLeft":(t.delta.x>0&&t.delta.y<0||t.delta.x<0&&t.delta.y>0)&&(t.delta.x<0?this.path2.scale(1.02,1):this.path2.scale(.98,1),t.delta.y>0?this.path2.scale(1,1.02):this.path2.scale(1,.98));break}this.deleteScaleRectangle(),this.drawScaleRectangle()}else if(this.path2&&null===this.strokeScaleNumber)this.path2.position.x+=t.delta.x,this.path2.position.y+=t.delta.y,this.deleteScaleRectangle(),this.drawScaleRectangle();else if(null!==this.strokeScaleNumber){switch(this.strokeScaleNumber){case 0:t.delta.x<0?this.path2.scale(1.03,1):this.path2.scale(.97,1);break;case 1:t.delta.y<0?this.path2.scale(1,1.04):this.path2.scale(1,.97);break;case 2:t.delta.x>0?this.path2.scale(1.03,1):this.path2.scale(.97,1);break;case 3:t.delta.y>0?this.path2.scale(1,1.04):this.path2.scale(1,.97);break}this.deleteScaleRectangle(),this.drawScaleRectangle()}}else this.segment?(this.segment.point.x+=t.delta.x,this.segment.point.y+=t.delta.y):this.path2&&(this.path2.position.x+=t.delta.x,this.path2.position.y+=t.delta.y);else e.path.add(t),e.path.fillColor="#efefef",this.crossedArr.length&&(this.crossed=!0)},this.tool.onMouseUp=()=>{let e=this;if(this.dragMode)this.simpArr=this.scope.project._children[0]._children[0].pathData,this.currentIndex!=this.pathHistory.length-1&&this.pathHistory.splice(this.currentIndex+1,1/0),this.pathHistory.push({data:this.scope.project._children[0]._children[0].pathData}),this.currentIndex=this.pathHistory.length-1,console.log("HISTORY"),console.log(this.scope.project._children[0]._children[0]);else{e.path.add(new Be.Point(e.path.curves[0].point1._x,e.path.curves[0].point1._y)),this.crossedArr=e.path.getCrossings(e.path);let t=[];for(let a=0;a<e.path.curves.length;a++)for(let s=0;s<e.path.curves[a].points.length;s++)t[t.length-1]&&t[t.length-1].x==e.path.curves[a].points[s].x&&t[t.length-1].y==e.path.curves[a].points[s].y||t.push({x:e.path.curves[a].points[s].x,y:e.path.curves[a].points[s].y});this.crossedArr.length?this.cutCrossings(t):this.FinArr=t,this.$emit("clearCanvas"),e.path=new Be.Path,e.path.strokeColor="black";for(let a=0;a<this.FinArr.length;a++)e.path.add(new Be.Point(this.FinArr[a].x,this.FinArr[a].y));e.path.closed=!0,e.path.fillColor={hue:360*Math.random(),saturation:1,lightness:.4*(Math.random()-.5)+.4},e.path.simplify(0),this.simpArr=this.scope.project._children[0]._children[0].pathData,this.currentIndex!=this.pathHistory.length-1&&this.pathHistory.splice(this.currentIndex+1,1/0),this.pathHistory.push({data:this.scope.project._children[0]._children[0].pathData}),this.currentIndex=this.pathHistory.length-1,console.log("HISTORY"),console.log(this.scope.project._children[0]._children[0]),console.log(this.scope.project._children[0]._children[0]),this.pathExtra=e.path}this.deletePathCircles(),this.drawCircles()}}},mounted(){this.scope=new Be.PaperScope,this.scope.setup(this.canvasId),console.log(document.body.clientWidth)},watch:{externalPathCurveCall(e){e&&this.ttt()},clear(){this.currentArr=[],this.finishArr=[]},simpValue(e,t){this.scope.project._children[0]._children[0]&&(this.pathHistory.push({data:this.scope.project._children[0]._children[0].pathData,simplify:!0}),this.currentIndex++,this.simpArr=this.pathHistory[this.pathHistory.length-1].data,this.$emit("clearSimp"),self.path=new Be.Path(this.simpArr),self.path.strokeColor="black",self.path.fillColor="red",e>t?(self.path.flatten(1),self.path.simplify()):self.path.flatten(40/e),this.pathHistory.push({data:this.scope.project._children[0]._children[0].pathData,simplify:!0}),this.currentIndex++,this.drawCircles())}}};const Ne=(0,o.Z)($e,[["render",ze],["__scopeId","data-v-6d8c9a35"]]);var Ue=Ne,Ze={name:"MasterPaper",data:()=>({canDraw:!0,clear:!1}),props:{externalPathCurveCall:Boolean},methods:{setPathCurveExternal(e){this.$emit("setPathCurveExternal",e)},changeIndex(e){this.$emit("changeIndex",1,e)},reset(){this.canDraw=!1,this.$refs.childCanvas.reset(),this.simpValue=2,this.clear=!this.clear},clearHandler(){this.canDraw=!0,this.$refs.childCanvas.reset(),this.simpValue=2,this.clear=!this.clear},clearSimp(){this.$refs.childCanvas.reset()}},components:{CanvasPaper:Ue}};const Ye=(0,o.Z)(Ze,[["render",Ie]]);var Ve=Ye,Ge={name:"DrawPage",data:()=>({pathCurve:null,pathCurveExternal:null,externalPathCurveCall:!1}),components:{masterPaper:Ve,mainWrap:xe},methods:{externalPathCall(){this.externalPathCurveCall=!0},setPathCurveExternal(e){console.log(e),this.pathCurveExternal=e},setActiveItem(e,t){this.pathCurve=t,this.$refs.carousel.setActiveItem(e)}}};const Je=(0,o.Z)(Ge,[["render",G]]);var qe=Je,Xe=(0,d.p7)({history:(0,d.PO)(),routes:[{path:"/",component:N},{path:"/draw",component:qe}]}),Ke=a(3765),Qe=a(2748);const et=(0,s.ri)(c);et.use(Xe),et.use(Ke.Z);for(const[tt,at]of Object.entries(Qe))et.component(tt,at);et.mount("#app")},858:function(){},4158:function(){}},t={};function a(s){var i=t[s];if(void 0!==i)return i.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,s,i,n){if(!s){var r=1/0;for(d=0;d<e.length;d++){s=e[d][0],i=e[d][1],n=e[d][2];for(var o=!0,l=0;l<s.length;l++)(!1&n||r>=n)&&Object.keys(a.O).every((function(e){return a.O[e](s[l])}))?s.splice(l--,1):(o=!1,n<r&&(r=n));if(o){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[s,i,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/mirror/"}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var i,n,r=s[0],o=s[1],l=s[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(i in o)a.o(o,i)&&(a.m[i]=o[i]);if(l)var d=l(a)}for(t&&t(s);c<r.length;c++)n=r[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(d)},s=self["webpackChunkhello_world"]=self["webpackChunkhello_world"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(5525)}));s=a.O(s)})();
//# sourceMappingURL=app.d6d7ac3f.js.map