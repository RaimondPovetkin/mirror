(function(){var t={5648:function(t,e,o){"use strict";var i=o(9242),s=o(3396);const n={id:"app"};function a(t,e,o,i,a,r){const l=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s.Wm)(l)])}var r={name:"App",components:{}},l=o(89);const h=(0,l.Z)(r,[["render",a]]);var c=h,d=o(2483);function p(t,e,o,i,n,a){const r=(0,s.up)("title-page"),l=(0,s.up)("slider-home");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(r),(0,s.Wm)(l)],64)}var u=o.p+"img/mir1.a31f46a8.jpg",m=o.p+"img/mir2.7399cfc6.jpg",v=o.p+"img/mir3.9bb5f2fb.jpg",g=o.p+"img/mir4.2ac9f67e.jpg";const f={class:"slider text"},b=(0,s.uE)('<div class="title" data-v-e08ed458>Работы наших креативных клиентов</div><div class="wrapper-block" data-v-e08ed458><div class="content-row" data-v-e08ed458><div class="card-item" data-v-e08ed458><div class="card-image" data-v-e08ed458><img class="image" src="'+u+'" data-v-e08ed458></div><div class="card-sign" data-v-e08ed458>Ольга Иванова г.Москва</div><div class="card-button button" data-v-e08ed458>ХОЧУ ТАКОЕ ЖЕ</div></div><div class="card-item" data-v-e08ed458><div class="card-image" data-v-e08ed458><img class="image" src="'+m+'" data-v-e08ed458></div><div class="card-sign" data-v-e08ed458>Ольга Иванова г.Москва</div><div class="card-button button" data-v-e08ed458>ХОЧУ ТАКОЕ ЖЕ</div></div><div class="card-item" data-v-e08ed458><div class="card-image" data-v-e08ed458><img class="image" src="'+v+'" data-v-e08ed458></div><div class="card-sign" data-v-e08ed458>Ольга Иванова г.Москва</div><div class="card-button button" data-v-e08ed458>ХОЧУ ТАКОЕ ЖЕ</div></div><div class="card-item" data-v-e08ed458><div class="card-image" data-v-e08ed458><img class="image" src="'+g+'" data-v-e08ed458></div><div class="card-sign" data-v-e08ed458>Ольга Иванова г.Москва</div><div class="card-button button" data-v-e08ed458>ХОЧУ ТАКОЕ ЖЕ</div></div></div></div><div class="wrapper-block" data-v-e08ed458><div class="content-row" data-v-e08ed458><div class="card-item" data-v-e08ed458><div class="card-image" data-v-e08ed458><img class="image" src="'+u+'" data-v-e08ed458></div><div class="card-sign" data-v-e08ed458>Ольга Иванова г.Москва</div><div class="card-button button" data-v-e08ed458>ХОЧУ ТАКОЕ ЖЕ</div></div><div class="card-item" data-v-e08ed458><div class="card-image" data-v-e08ed458><img class="image" src="'+m+'" data-v-e08ed458></div><div class="card-sign" data-v-e08ed458>Ольга Иванова г.Москва</div><div class="card-button button" data-v-e08ed458>ХОЧУ ТАКОЕ ЖЕ</div></div><div class="card-item" data-v-e08ed458><div class="card-image" data-v-e08ed458><img class="image" src="'+v+'" data-v-e08ed458></div><div class="card-sign" data-v-e08ed458>Ольга Иванова г.Москва</div><div class="card-button button" data-v-e08ed458>ХОЧУ ТАКОЕ ЖЕ</div></div><div class="card-item" data-v-e08ed458><div class="card-image" data-v-e08ed458><img class="image" src="'+g+'" data-v-e08ed458></div><div class="card-sign" data-v-e08ed458>Ольга Иванова г.Москва</div><div class="card-button button" data-v-e08ed458>ХОЧУ ТАКОЕ ЖЕ</div></div></div></div><div class="trigger" data-v-e08ed458></div>',4),w=[b];function y(t,e,o,i,n,a){return(0,s.wg)(),(0,s.iD)("div",f,w)}var x={name:"HelloWorld",data:()=>({count:0,observer:null}),watch:{count(){console.log(document)}},props:{msg:String},computed:{},mounted(){this.observer=new IntersectionObserver(this.returnOnEntry(),{threshold:[.9]}),this.observer.observe(document.getElementsByClassName("trigger")[0])},methods:{returnOnEntry(){let t=this;return function(e){e.forEach((e=>{e.isIntersecting&&t.count++}))}}}};const C=(0,l.Z)(x,[["render",y],["__scopeId","data-v-e08ed458"]]);var P=C;const _=t=>((0,s.dD)("data-v-587fa017"),t=t(),(0,s.Cn)(),t),R={class:"video-container"},k={class:"caption"},M={class:"title_container text"},S=(0,s.uE)('<div class="first-word" data-v-587fa017>Белое зеркало</div><div class="second-row" data-v-587fa017><span class="second-word" data-v-587fa017>Создай своё </span>  <span class="third-word" data-v-587fa017> уникальное зеркало</span></div><div class="second-row" data-v-587fa017><span class="description" data-v-587fa017>Нарисуй форму, выбери раму, цвет и крепление. А мы приедем и установим его в удобное время</span>  </div>',3),I={class:"second-row"},L=_((()=>(0,s._)("button",{class:"button"},"СОЗДАТЬ",-1)));function j(t,e,o,n,a,r){const l=(0,s.up)("router-link"),h=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)("div",R,[(0,s._)("div",k,[(0,s._)("div",M,[S,(0,s._)("div",I,[(0,s.Wm)(l,{to:"/draw"},{default:(0,s.w5)((()=>[L])),_:1})]),(0,s.Wm)(i.uT,{name:"slide-fade"},{default:(0,s.w5)((()=>[(0,s.Wm)(h)])),_:1})])])])}var A={name:"TitlePage",methods:{goDraw(){}}};const E=(0,l.Z)(A,[["render",j],["__scopeId","data-v-587fa017"]]);var D=E,W={name:"FirstPage",components:{TitlePage:D,sliderHome:P}};const H=(0,l.Z)(W,[["render",p]]);var N=H;const T={style:{width:"100%",height:"100%",display:"flex"}},z=(0,s._)("button",{class:"button-home"},"Белое зеркало",-1),F={style:{height:"100vh",width:"100%"}},O=(0,s._)("h3",{text:"2xl",justify:"center"},"333",-1);function B(t,e,o,i,n,a){const r=(0,s.up)("router-link"),l=(0,s.up)("master-paper"),h=(0,s.up)("el-carousel-item"),c=(0,s.up)("main-wrap"),d=(0,s.up)("el-carousel");return(0,s.wg)(),(0,s.iD)("div",T,[(0,s.Wm)(r,{to:"/"},{default:(0,s.w5)((()=>[z])),_:1}),(0,s._)("div",F,[(0,s.Wm)(d,{ref:"carousel",style:{height:"100%"},direction:"vertical",autoplay:!1},{default:(0,s.w5)((()=>[(0,s.Wm)(h,null,{default:(0,s.w5)((()=>[(0,s.Wm)(l,{onChangeIndex:a.setActiveItem,onSetPathCurveExternal:a.setPathCurveExternal,externalPathCurveCall:t.externalPathCurveCall},null,8,["onChangeIndex","onSetPathCurveExternal","externalPathCurveCall"])])),_:1}),(0,s.Wm)(h,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c,{onChangeIndex:a.setActiveItem,onExternalPath:a.externalPathCall,pathCurve:t.pathCurve,pathCurveExternal:t.pathCurveExternal},null,8,["onChangeIndex","onExternalPath","pathCurve","pathCurveExternal"])])),_:1}),(0,s.Wm)(h,null,{default:(0,s.w5)((()=>[O])),_:1})])),_:1},512)])])}var U=o(7139),$=o.p+"img/frame1.561435d6.png",Z=o.p+"img/frame2.eb95a4d3.png",V=o.p+"img/frame3.9909d761.png";const Y=t=>((0,s.dD)("data-v-86f7b50a"),t=t(),(0,s.Cn)(),t),G={class:"frame-content-wrap"},J=Y((()=>(0,s._)("img",{class:"menu-image",src:$},null,-1))),q=[J],X=Y((()=>(0,s._)("img",{class:"menu-image",src:Z},null,-1))),K=[X],Q=Y((()=>(0,s._)("img",{class:"menu-image",src:V},null,-1))),tt=[Q],et={key:0,class:"preload"},ot=Y((()=>(0,s._)("div",{id:"container"},null,-1)));function it(t,e,o,i,n,a){const r=(0,s.up)("el-button"),l=(0,s.up)("el-popover");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("button",{class:"button-form",onClick:e[0]||(e[0]=(...t)=>a.toDrawPage&&a.toDrawPage(...t))},"форма "),(0,s.Wm)(l,{ref:"popoverFrame",placement:"left-start",title:"Title",width:150,trigger:"click",content:"this is content, this is content, this is content"},{reference:(0,s.w5)((()=>[(0,s.Wm)(r,{class:"button-frame"},{default:(0,s.w5)((()=>[(0,s.Uk)("Рама")])),_:1})])),default:(0,s.w5)((()=>[(0,s._)("div",G,[(0,s._)("div",{class:"frameIMG",style:(0,U.j5)(0==n.frameIndex?"background-color: #7a7b81":""),onClick:e[1]||(e[1]=(...t)=>a.setFrame1&&a.setFrame1(...t))},q,4),(0,s._)("div",{class:"frameIMG",style:(0,U.j5)(1==n.frameIndex?"background-color: #7a7b81":""),onClick:e[2]||(e[2]=(...t)=>a.setFrame2&&a.setFrame2(...t))},K,4),(0,s._)("div",{class:"frameIMG",style:(0,U.j5)(2==n.frameIndex?"background-color: #7a7b81":""),onClick:e[3]||(e[3]=(...t)=>a.setFrame3&&a.setFrame3(...t))},tt,4)])])),_:1},512),(0,s._)("button",{class:"button-fastening",onClick:e[4]||(e[4]=(...t)=>a.fastening&&a.fastening(...t))},"крепление"),(0,s._)("button",{class:"button-ordering",onClick:e[5]||(e[5]=e=>t.$emit("changeIndex",2))},"оформление"),n.preloader?((0,s.wg)(),(0,s.iD)("div",et,"прелоадер")):(0,s.kq)("",!0),ot],64)}o(7658);var st=o(1114),nt=o(4543),at=o(1273),rt=o(499);let lt,ht,ct=!1,dt=0,pt=0;var ut={name:"MainWrap.vue",props:{pathCurve:Object},data(){return{frameIndex:0,segments:[],preloader:!0,firstInit:!1,canvas:null,controls:null,camera:"",geometry:"",material:"",selectObject:{},requestID:""}},mounted(){this.pathCurve&&(window.addEventListener("resize",this.onWindowResize,!1),window.addEventListener("click",this.onMouseDblclick,!1),document.getElementById("container").addEventListener("mousemove",this.onMouseMove),document.getElementById("container").addEventListener("mousedown",this.onMouseDown),document.getElementById("container").addEventListener("mouseup",this.onMouseUp))},beforeUnmount(){document.getElementById("container").removeEventListener("resize",this.onWindowResize),document.getElementById("container").removeEventListener("click",this.onMouseDblclick),document.getElementById("container").removeEventListener("mousemove",this.onMouseMoveT),window.cancelAnimationFrame(this.requestID)},watch:{async pathCurve(t){if(t&&!this.firstInit)console.log(t),this.firstInit=!0,await this.init(),window.addEventListener("resize",this.onWindowResize,!1),window.addEventListener("click",this.onMouseDblclick,!1),document.getElementById("container").addEventListener("mousemove",this.onMouseMove),document.getElementById("container").addEventListener("mousedown",this.onMouseDown),document.getElementById("container").addEventListener("mouseup",this.onMouseUp);else if(t&&this.firstInit){this.removeMeshes();const t=lt.getObjectByProperty("type","Reflector");t.geometry.dispose(),t.material.dispose(),lt.remove(t),console.log(lt),ht.renderLists.dispose(),await this.createGeometry(!1)}}},methods:{frame3(){this.$emit("externalPath")},toDrawPage(){this.$refs.popoverFrame.hide(),this.$emit("changeIndex",0)},fastening(){this.$refs.popoverFrame.hide(),this.controls.maxAzimuthAngle=1/0,this.controls.minAzimuthAngle=1/0,this.controls.maxPolarAngle=Math.PI,this.controls.minPolarAngle=0,console.log(this.camera);let t=(this.camera.position.x- -30)/100,e=(this.camera.position.y- -16)/100,o=(this.camera.position.z-19)/100,i=0,s=setInterval((()=>{this.camera.position.x-=t,this.camera.position.y-=e,this.camera.position.z-=o,i++,100==i&&window.clearInterval(s)}),10)},rotateScene(){},onMouseMove(t){if(ct){console.log("move"),t.preventDefault();var e=t.clientX-dt,o=t.clientY-pt;dt=t.clientX,pt=t.clientY,this.rotateScene(e,o)}},onMouseDown(t){ct=!0,dt=t.clientX,pt=t.clientY},onMouseUp(){ct=!1},async init(){lt=new st.xsS,this.camera=new st.cPb(45,window.innerWidth/window.innerHeight,1,500),this.camera.up.set(0,-1,0),this.camera.position.z=39,this.camera.position.x=3,this.camera.position.y=-6,await this.createGeometry(),await this.createRender(),this.controls=new nt.z(this.camera,this.canvas),this.controls.rotateSpeed=.9,this.controls.zoomSpeed=.9,this.controls.panSpeed=0,this.controls.maxAzimuthAngle=.01,this.controls.minAzimuthAngle=-2.9,this.controls.maxPolarAngle=2,this.controls.minPolarAngle=1,this.controls.enableDamping=!0,this.controls.dampingFactor=.1,this.controls.update(),this.animate(),this.addLight()},addLight(){const t=new st.cek(16777215);t.position.copy(this.camera.position),t.position.x=-60,t.position.y=20,t.position.z=-5;const e=new st.cek(16777215);e.position.copy(this.camera.position),e.position.x=60,e.position.y=-80,e.position.z=50,lt.add(e),lt.add(t)},onMouseMoveT(){event.preventDefault()},createGeometry(t=!0){console.log(this.pathCurve);var e=new st.bnF;e.moveTo(this.pathCurve[0].curve.points[0].x/10,this.pathCurve[0].curve.points[0].y/10);let o=[];for(let n=0;n<this.pathCurve.length-1;n++)o.push(new st.FM8(this.pathCurve[n].curve.points[3].x/10,this.pathCurve[n].curve.points[3].y/10));e.splineThru(o);const i=new st.oa8(e,100);let s=new at.r(i,{clipBias:.002,color:8952217});if(s.position.x=-4.25,s.position.y=-14,s.position.z=8,s.rotation.y=1.57,s.scale.x=.4,s.scale.y=.4,s.scale.z=.4,lt.add(s),this.setFrame1(),t){const t=new rt.L;t.load("../../InteriorTest.obj",(t=>{const e=t;e.position.x=32.5,e.position.y=20,e.scale.x=15,e.scale.y=15,e.scale.z=15,e.rotation.z=Math.PI,lt.add(t),this.preloader=!1,console.log("good")}))}},createRender(){ht=new st.CP7,ht.setSize(window.innerWidth-30,window.innerHeight),ht.setClearColor(12178431,1);let t=document.getElementById("container");t.appendChild(ht.domElement),this.canvas=ht.domElement},animate(){this.controls.update(),this.requestID=requestAnimationFrame(this.animate),this.render()},render(){ht.render(lt,this.camera)},onWindowResize(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),ht.setSize(window.innerWidth,window.innerHeight)},onMouseDblclick(t){console.log(t);var e=this.getIntersects(t);0!=e.length&&(e[0].object,st.Kj0)},getIntersects(t){t.preventDefault();var e=new st.iMs,o=new st.FM8;o.x=t.clientX/window.innerWidth*2-1,o.y=-t.clientY/window.innerHeight*2+1,e.setFromCamera(o,this.camera);var i=e.intersectObjects(lt.children);return i},setMirorBack(){var t=new st.bnF;t.moveTo(this.pathCurve[0].curve.points[0].x/10,this.pathCurve[0].curve.points[0].y/10);let e=[];for(let n=0;n<this.pathCurve.length-1;n++)e.push(new st.FM8(this.pathCurve[n].curve.points[3].x/10,this.pathCurve[n].curve.points[3].y/10));t.splineThru(e);let o=new st.O7d(t,{curveSegments:162,depth:.3,bevelEnabled:!1});var i=new st.vBJ({color:9871014});let s=new st.Kj0(o,i);s.position.x=-4.4,s.position.y=-14,s.position.z=8,s.rotation.y=1.57,s.scale.x=.4,s.scale.y=.4,s.scale.z=.4,s.name="MirorBack",lt.add(s)},removeMeshes(){for(let t=lt.children.length-1;t>=0;t--)"Mesh"===lt.children[t].type&&(console.log(lt.children[t].material),lt.children[t].geometry.dispose(),lt.children[t].material.length?(lt.children[t].material[0].dispose(),lt.children[t].material[1].dispose()):lt.children[t].material.dispose(),lt.remove(lt.children[t]))},setFrame1(){console.log("333");const t=lt.getObjectByProperty("name","MirorBack");t&&(t.geometry.dispose(),t.material.dispose(),lt.remove(t)),this.removeMeshes(),this.frameIndex=0;var e=new st.bnF;e.moveTo(this.pathCurve[0].curve.points[0].x/10,this.pathCurve[0].curve.points[0].y/10);let o=[];for(let h=0;h<this.pathCurve.length-1;h++)o.push(new st.FM8(this.pathCurve[h].curve.points[3].x/10,this.pathCurve[h].curve.points[3].y/10));e.splineThru(o);const i=new st.dpR;let s=new st.O7d(e,{curveSegments:162,depth:3,bevelEnabled:!1}),n=i.load("../../Texture/treeD.jpg");n.wrapS=n.wrapT=st.rpg,n.repeat.set(.05,.1),n.offset.set(.1,.1),n.rotation=1.55;let a=i.load("../../Texture/treeD.jpg");a.wrapS=a.wrapT=st.rpg,a.repeat.set(.05,.1),a.offset.set(.1,.01),a.rotation=0;let r=[new st.xoR({map:n}),new st.xoR({map:a})],l=new st.Kj0(s,r);l.position.x=-5.5,l.position.y=-14,l.position.z=8,l.rotation.y=1.57,l.scale.x=.4,l.scale.y=.4,l.scale.z=.4,lt.add(l)},setFrame2(){this.frameIndex=1,this.removeMeshes(),this.setMirorBack()},setFrame3(){this.removeMeshes(),this.setMirorBack(),this.frameIndex=2;const t=new st.dpR;let e=t.load("../../Texture/treeD.jpg");e.wrapS=e.wrapT=st.rpg,e.repeat.set(.05,.1),e.offset.set(.1,.1),e.rotation=1.55;let o=t.load("../../Texture/treeD.jpg");o.wrapS=o.wrapT=st.rpg,o.repeat.set(.05,.1),o.offset.set(.1,.01),o.rotation=0;let i=[new st.xoR({map:e}),new st.xoR({map:o})],s=[];s.push(new st.Pa4(this.pathCurve[0].curve.points[0].x/10,this.pathCurve[0].curve.points[0].y/10,0));for(let c=0;c<this.pathCurve.length-1;c++)s.push(new st.Pa4(this.pathCurve[c].curve.points[1].x/10,this.pathCurve[c].curve.points[1].y/10,0));s.push(new st.Pa4(this.pathCurve[this.pathCurve.length-1].curve.points[3].x/10,this.pathCurve[this.pathCurve.length-1].curve.points[3].y/10,0)),s.push(new st.Pa4(this.pathCurve[1].curve.points[1].x/10,this.pathCurve[1].curve.points[1].y/10,0));const n=new st.YT8(s),a={steps:1400,bevelEnabled:!0,bevelThickness:1,bevelSegments:10,bevelSize:1,extrudePath:n};let r=new st.bnF;r.moveTo(-1,-.8),r.lineTo(-1,1),r.lineTo(1.5,1),r.lineTo(1.5,-1),r.lineTo(-.8,-1),r.lineTo(-.9,-.95),r.lineTo(-.95,-.9);const l=new st.O7d(r,a),h=new st.Kj0(l,i);h.position.x=-4.5,h.position.y=-14,h.position.z=8,h.rotation.y=1.57,h.scale.x=.4,h.scale.y=.4,h.scale.z=.4,lt.add(h)}}};const mt=(0,l.Z)(ut,[["render",it],["__scopeId","data-v-86f7b50a"]]);var vt=mt;const gt={class:"row",style:{"margin-top":"50px"}},ft=(0,s._)("div",{class:"col-2"},null,-1),bt={class:"col-8"},wt=(0,s._)("div",{class:"col-2"},null,-1);function yt(t,e,o,i,n,a){const r=(0,s.up)("canvas-paper");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",gt,[ft,(0,s._)("div",bt,[(0,s.Wm)(r,{clear:t.clear,dragMode:!t.canDraw,onClearCanvas:a.reset,onClearSimp:a.clearSimp,"canvas-id":"canvas-one",ref:"childCanvas",onClearHandler:a.clearHandler,onNextButton:a.changeIndex,onSetPathCurveExternal:a.setPathCurveExternal,externalPathCurveCall:o.externalPathCurveCall},null,8,["clear","dragMode","onClearCanvas","onClearSimp","onClearHandler","onNextButton","onSetPathCurveExternal","externalPathCurveCall"])]),wt])])}const xt=t=>((0,s.dD)("data-v-166da094"),t=t(),(0,s.Cn)(),t),Ct=xt((()=>(0,s._)("div",{style:{"margin-top":"15px","margin-bottom":"15px"}},null,-1))),Pt={style:{display:"flex","justify-content":"center"}},_t={style:{height:"80%",width:"45%"}},Rt=["width","height","id"],kt={class:"buttons-block"},Mt={class:"buttons-wrap"},St={style:{display:"flex","flex-direction":"column"}},It=xt((()=>(0,s._)("label",{for:"volume"},"СГЛАЖИВАНИЕ",-1))),Lt=["disabled"];function jt(t,e,o,n,a,r){const l=(0,s.up)("Delete"),h=(0,s.up)("el-icon"),c=(0,s.up)("el-button"),d=(0,s.up)("Undo"),p=(0,s.up)("Redo"),u=(0,s.up)("ArrowExpand"),m=(0,s.up)("VectorCurve");return(0,s.wg)(),(0,s.iD)(s.HY,null,[Ct,(0,s._)("div",Pt,[(0,s._)("div",_t,[(0,s._)("canvas",{key:"countRerender",width:r.calcWidth(),height:r.calcHeight(),id:o.canvasId,class:"canvas-style",resize:"true",onMousedown:e[0]||(e[0]=(...t)=>r.mouseDown&&r.mouseDown(...t))},null,40,Rt)]),(0,s._)("div",kt,[(0,s._)("div",Mt,[(0,s.Wm)(c,{onClick:r.clearPaper,class:"btn-wrap btn-tool"},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{size:20,style:{"margin-top":"-5px","margin-right":"3px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(l)])),_:1}),(0,s.Uk)(" ОЧИСТИТЬ")])),_:1},8,["onClick"]),(0,s.Wm)(c,{onClick:r.back,class:"btn-wrap btn-tool"},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{size:20,style:{"margin-top":"-5px","margin-right":"3px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(d)])),_:1}),(0,s.Uk)(" НАЗАД ")])),_:1},8,["onClick"]),(0,s.Wm)(c,{onClick:r.forward,class:"btn-wrap btn-tool"},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{size:20,style:{"margin-top":"-5px","margin-right":"3px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(p)])),_:1}),(0,s.Uk)(" ВПЕРЁД ")])),_:1},8,["onClick"]),(0,s.Wm)(c,{onClick:r.changeScale,class:"btn-wrap btn-tool"},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{size:20,style:{"margin-top":"-5px","margin-right":"3px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(u)])),_:1}),(0,s.Uk)(" МАСШТАБ ")])),_:1},8,["onClick"]),(0,s.Wm)(c,{onClick:r.rotateHandler,class:"btn-wrap btn-tool"},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{size:20,style:{"margin-top":"-5px","margin-right":"3px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(u)])),_:1}),(0,s.Uk)(" Поворот ")])),_:1},8,["onClick"]),(0,s.Wm)(c,{onClick:r.curveEditorHandler,class:"btn-wrap btn-tool"},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{size:20,style:{"margin-top":"-5px","margin-right":"3px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(m)])),_:1}),(0,s.Uk)(" КРИВЫЕ "+(0,U.zw)(t.curveEditorMode),1)])),_:1},8,["onClick"]),(0,s._)("div",St,[It,(0,s.wy)((0,s._)("input",{type:"range",id:"volume",name:"volume",min:"2",max:"30",disabled:!o.dragMode||t.fewSegments,"onUpdate:modelValue":e[1]||(e[1]=e=>t.simpValue=e)},null,8,Lt),[[i.nr,t.simpValue]])]),(0,s.Wm)(c,{onClick:r.goToDrawPage},{default:(0,s.w5)((()=>[(0,s.Uk)(" NEXT ")])),_:1},8,["onClick"])])])])],64)}var At=o(1796),Et=o(4902),Dt=o(5921),Wt=o(2228),Ht=o(6880);const Nt=o(5445);var Tt={name:"CanvasPaper",components:{Undo:At.Z,Redo:Et.Z,Delete:Dt.Z,ArrowExpand:Wt.Z,VectorCurve:Ht.Z},props:{canvasId:String,clear:Boolean,dragMode:Boolean},emits:["clearCanvas","clearSimp","clearHandler","nextButton"],data:()=>({countRerender:1,simpArr:null,pathHistory:[],currentIndex:0,pathExtra:null,curveEditorMode:!1,scaleMode:!1,currentRotationPant:null,strokeScaleNumber:null,cornerScale:null,simpValue:2,fewSegments:!1,segment:null,segmentDot:null,segmentPointNumber:0,movePath:!1,path2:null,hitOptions:{segments:!0,stroke:!0,fill:!0,tolerance:1},hitOptions2:{segments:!0,stroke:!0,fill:!0,tolerance:1},crossed:!1,loop:0,currentArr:[],crossedArr:[],FinArr:[],startCoord:{x:null,y:null},path:null,scope:null,finishArr:[]}),methods:{rotateHandler(){console.log(this.scope.project._children[0]._children.find((t=>"Path"==t.className)));let t=this.scope.project._children[0]._children.find((t=>"Path"==t.className)),e=t.bounds.width>t.bounds.height?t.bounds.width/2:t.bounds.height/2,o=new Nt.Shape.Circle({center:[t.position.x,t.position.y],radius:e,strokeColor:"black"});o.name="rotate"},curveEditorHandler(){let t=this;this.curveEditorMode?(t.path.fullySelected=!1,this.curveEditorMode=!1,this.deleteMiniPathCircles(),this.drawCircles()):(this.scaleMode&&this.changeScale(),t.path.fullySelected=!0,this.drawCirclesCurves(),this.curveEditorMode=!0,this.deletePathCircles())},goToDrawPage(){let t=this;this.scope.project._children[0]._children.find((t=>"Path"==t.className)).flatten(1),console.log(this.scope.project._children[0]._children.find((t=>"Path"==t.className))),console.log(t.path.getCrossings(t.path))},toNormalSizeChildren(){for(let t=0;t<this.scope.project._children[0]._children.length;t++)"circle"==this.scope.project._children[0]._children[t].type&&this.scope.project._children[0]._children[t].radius>5?this.scope.project._children[0]._children[t].radius=10:this.scope.project._children[0]._children[t].type||(this.scope.project._children[0]._children.find((t=>"Path"==t.className)).strokeWidth=1)},deleteScaleRectangle(){var t=this.scope.project.activeLayer.children;t["csaleRectangle"]&&t["topLeft"]&&t["topRight"]&&t["bottomLeft"]&&t["bottomRight"]&&(t["csaleRectangle"].remove(),t["topLeft"].remove(),t["topRight"].remove(),t["bottomLeft"].remove(),t["bottomRight"].remove())},deleteRotationArrows(){var t=this.scope.project.activeLayer.children;t["bottomLeftRot"]&&t["bottomLeftRot"].remove(),t["bottomRightRot"]&&t["bottomRightRot"].remove(),t["topLeftRot"]&&t["topLeftRot"].remove(),t["topRightRot"]&&t["topRightRot"].remove()},drawScaleRectangle(){let t=this.scope.project._children[0]._children.find((t=>"Path"==t.className)),e=t.bounds;var o=new Nt.Rectangle(new Nt.Point(e.topLeft.x,e.topLeft.y),new Nt.Size(e.width,e.height)),i=new Nt.Path.Rectangle(o);i.name="csaleRectangle",i.strokeColor="black",i.dashArray=[10,12];let s=new Nt.Path({segments:[[t.bounds.topLeft.x,t.bounds.topLeft.y],[t.bounds.topLeft.x+10,t.bounds.topLeft.y],[t.bounds.topLeft.x+10,t.bounds.topLeft.y-10],[t.bounds.topLeft.x-10,t.bounds.topLeft.y-10],[t.bounds.topLeft.x-10,t.bounds.topLeft.y+10],[t.bounds.topLeft.x,t.bounds.topLeft.y+10],[t.bounds.topLeft.x,t.bounds.topLeft.y]],strokeColor:"black",fillColor:"white",strokeWidth:1});s.name="topLeft";let n=new Nt.Path({segments:[[t.bounds.topRight.x,t.bounds.topRight.y],[t.bounds.topRight.x,t.bounds.topRight.y+10],[t.bounds.topRight.x+10,t.bounds.topRight.y+10],[t.bounds.topRight.x+10,t.bounds.topRight.y-10],[t.bounds.topRight.x-10,t.bounds.topRight.y-10],[t.bounds.topRight.x-10,t.bounds.topRight.y],[t.bounds.topRight.x,t.bounds.topRight.y]],strokeColor:"black",fillColor:"white",strokeWidth:1});n.name="topRight";let a=new Nt.Path({segments:[[t.bounds.bottomRight.x,t.bounds.bottomRight.y],[t.bounds.bottomRight.x,t.bounds.bottomRight.y-10],[t.bounds.bottomRight.x+10,t.bounds.bottomRight.y-10],[t.bounds.bottomRight.x+10,t.bounds.bottomRight.y+10],[t.bounds.bottomRight.x-10,t.bounds.bottomRight.y+10],[t.bounds.bottomRight.x-10,t.bounds.bottomRight.y],[t.bounds.bottomRight.x,t.bounds.bottomRight.y]],strokeColor:"black",fillColor:"white",strokeWidth:1});a.name="bottomRight";let r=new Nt.Path({segments:[[t.bounds.bottomLeft.x,t.bounds.bottomLeft.y],[t.bounds.bottomLeft.x,t.bounds.bottomLeft.y-10],[t.bounds.bottomLeft.x-10,t.bounds.bottomLeft.y-10],[t.bounds.bottomLeft.x-10,t.bounds.bottomLeft.y+10],[t.bounds.bottomLeft.x+10,t.bounds.bottomLeft.y+10],[t.bounds.bottomLeft.x+10,t.bounds.bottomLeft.y],[t.bounds.bottomLeft.x,t.bounds.bottomLeft.y]],strokeColor:"black",fillColor:"white",strokeWidth:1});r.name="bottomLeft"},calcHeight(){return document.body.clientWidth/100*42},calcWidth(){let t=document.body.clientWidth/100*64;return document.body.clientWidth-t},deleteMiniPathCircles(){while(this.scope.project.activeLayer.children["circlePahtMini"])this.scope.project.activeLayer.children["circlePahtMini"].remove()},deletePathCircles(){while(this.scope.project.activeLayer.children["circlePaht"])this.scope.project.activeLayer.children["circlePaht"].remove()},changeScale(){if(this.scaleMode){this.scaleMode=!1;var t=this.scope.project.activeLayer.children;t["csaleRectangle"].remove(),t["topLeft"].remove(),t["topRight"].remove(),t["bottomLeft"].remove(),t["bottomRight"].remove(),this.drawCircles()}else{this.scaleMode=!0,this.deleteScaleRectangle(),this.drawScaleRectangle(),this.deletePathCircles();let t=this;t.path.fullySelected=!1,this.curveEditorMode=!1,this.deleteMiniPathCircles(),t.path.selected=!1}console.log(this.scope.project)},forward(){this.scaleMode=!1,this.currentIndex<this.pathHistory.length-1&&(this.currentIndex++,this.pathHistory[this.currentIndex]&&this.pathHistory[this.currentIndex].simplify?this.forward():(this.$emit("clearSimp"),self.path=new Nt.Path(this.pathHistory[this.currentIndex].data),self.path.strokeColor="black",self.path.fillColor="red",self.path.closed=!0))},drawCirclesCurves(){if(!this.scaleMode){let o=this.scope.project._children[0]._children.find((t=>"Path"==t.className));if(console.log(o),o._segments)for(let i=0;i<o._segments.length;i++){var t=new Nt.Shape.Circle(new Nt.Point(o._segments[i].curve.points[1].x,o._segments[i].curve.points[1].y),3);t.name="circlePahtMini",t.fillColor="rgba(0,157,236)";var e=new Nt.Shape.Circle(new Nt.Point(o._segments[i].curve.points[2].x,o._segments[i].curve.points[2].y),3);e.name="circlePahtMini",e.fillColor="rgba(0,157,236)"}console.log(o),o._segments.length>3?this.fewSegments=!1:this.fewSegments=!0}},drawCircles(){if(!this.scaleMode){let e=this.scope.project._children[0]._children.find((t=>"Path"==t.className));if(console.log(e),e._segments)for(let o=0;o<e._segments.length;o++){var t=new Nt.Shape.Circle(new Nt.Point(e._segments[o].point.x,e._segments[o].point.y),10);t.strokeColor="rgba(0,38,32,0.5)",t.name="circlePaht",t.fillColor="rgba(0,255,217,0.2)"}console.log(e),e._segments.length>3?this.fewSegments=!1:this.fewSegments=!0}},clearPaper(){this.simpArr=null,this.pathHistory=[],this.currentIndex=0,this.scaleMode=!1,this.curveEditorMode=!1,this.simpValue=2,this.$emit("clearHandler")},back(){if(this.scaleMode=!1,this.curveEditorMode=!1,this.currentIndex>0)if(this.currentIndex--,this.pathHistory[this.currentIndex-1]&&this.pathHistory[this.currentIndex-1].simplify)this.back();else{let t=this;this.$emit("clearSimp"),t.path=new Nt.Path(this.pathHistory[this.currentIndex].data),t.path.strokeColor="black",t.path.fillColor="red",t.path.closed=!0,this.simpValue}},drawRotationArrow(t){let e=this.scope.project.activeLayer.children.filter((t=>"bottomLeft"==t.name||"bottomRight"==t.name||"topLeft"==t.name||"topRight"==t.name)),o=1e4,i=null;for(let E=0;E<e.length;E++){let s=Math.abs(t.point.x-e[E].position.x),n=Math.abs(t.point.y-e[E].position.y);n+s<o&&(o=n+s,i=E)}let s=e[i];switch(s.name){case"topRight":var n=new Nt.Path.Arc(new Nt.Point(s.position.x-5,s.position.y-30),new Nt.Point(s.position.x+18,s.position.y-18),new Nt.Point(s.position.x+30,s.position.y+5));n.add(new Nt.Point(s.position.x+20,s.position.y+5)),n.add(new Nt.Point(s.position.x+35,s.position.y+20)),n.add(new Nt.Point(s.position.x+50,s.position.y+5)),n.add(new Nt.Point(s.position.x+40,s.position.y+5));var a=new Nt.Point(42,0),r=new Nt.Point(3,-3),l=new Nt.Point(s.position.x+40,s.position.y+5),h=new Nt.Segment(l,null,r),c=new Nt.Point(s.position.x-5,s.position.y-40),d=new Nt.Segment(c,a,null);n.add(h),n.add(d),n.add(new Nt.Point(s.position.x-5,s.position.y-50)),n.add(new Nt.Point(s.position.x-20,s.position.y-35)),n.add(new Nt.Point(s.position.x-5,s.position.y-20)),n.add(new Nt.Point(s.position.x-5,s.position.y-30)),n.strokeColor="black",n.fillColor="white",n.name="topRightRot";break;case"topLeft":var p=new Nt.Path.Arc(new Nt.Point(s.position.x+5,s.position.y-30),new Nt.Point(s.position.x-18,s.position.y-18),new Nt.Point(s.position.x-30,s.position.y+5));p.add(new Nt.Point(s.position.x-20,s.position.y+5)),p.add(new Nt.Point(s.position.x-35,s.position.y+20)),p.add(new Nt.Point(s.position.x-50,s.position.y+5)),p.add(new Nt.Point(s.position.x-40,s.position.y+5));var u=new Nt.Point(-42,0),m=new Nt.Point(-3,-3),v=new Nt.Point(s.position.x-40,s.position.y+5),g=new Nt.Segment(v,null,m),f=new Nt.Point(s.position.x+5,s.position.y-40),b=new Nt.Segment(f,u,null);p.add(g),p.add(b),p.add(new Nt.Point(s.position.x+5,s.position.y-50)),p.add(new Nt.Point(s.position.x+20,s.position.y-35)),p.add(new Nt.Point(s.position.x+5,s.position.y-20)),p.add(new Nt.Point(s.position.x+5,s.position.y-30)),p.strokeColor="black",p.fillColor="white",p.name="topLeftRot";break;case"bottomRight":var w=new Nt.Path.Arc(new Nt.Point(s.position.x+30,s.position.y-5),new Nt.Point(s.position.x+18,s.position.y+18),new Nt.Point(s.position.x-5,s.position.y+30));w.add(new Nt.Point(s.position.x-5,s.position.y+20)),w.add(new Nt.Point(s.position.x-20,s.position.y+35)),w.add(new Nt.Point(s.position.x-5,s.position.y+50)),w.add(new Nt.Point(s.position.x-5,s.position.y+40));var y=new Nt.Point(3,3),x=new Nt.Point(42,0),C=new Nt.Point(s.position.x-5,s.position.y+40),P=new Nt.Segment(C,null,x),_=new Nt.Point(s.position.x+40,s.position.y-5),R=new Nt.Segment(_,y,null);w.add(P),w.add(R),w.add(new Nt.Point(s.position.x+50,s.position.y-5)),w.add(new Nt.Point(s.position.x+35,s.position.y-20)),w.add(new Nt.Point(s.position.x+20,s.position.y-5)),w.add(new Nt.Point(s.position.x+30,s.position.y-5)),w.strokeColor="black",w.fillColor="white",w.name="bottomRightRot";break;case"bottomLeft":var k=new Nt.Path.Arc(new Nt.Point(s.position.x-30,s.position.y-5),new Nt.Point(s.position.x-18,s.position.y+18),new Nt.Point(s.position.x+5,s.position.y+30));k.add(new Nt.Point(s.position.x+5,s.position.y+20)),k.add(new Nt.Point(s.position.x+20,s.position.y+35)),k.add(new Nt.Point(s.position.x+5,s.position.y+50)),k.add(new Nt.Point(s.position.x+5,s.position.y+40));var M=new Nt.Point(-3,3),S=new Nt.Point(-42,0),I=new Nt.Point(s.position.x+5,s.position.y+40),L=new Nt.Segment(I,null,S),j=new Nt.Point(s.position.x-40,s.position.y-5),A=new Nt.Segment(j,M,null);k.add(L),k.add(A),k.add(new Nt.Point(s.position.x-50,s.position.y-5)),k.add(new Nt.Point(s.position.x-35,s.position.y-20)),k.add(new Nt.Point(s.position.x-20,s.position.y-5)),k.add(new Nt.Point(s.position.x-30,s.position.y-5)),k.strokeColor="black",k.fillColor="white",k.name="bottomLeftRot";break}},cutCrossings(t){let e=[];for(let a=0;a<this.crossedArr.length;a++){let o=1e4,i=null;for(let e=0;e<t.length;e++){let s=Math.abs(t[e].x-this.crossedArr[a]._point.x),n=Math.abs(t[e].y-this.crossedArr[a]._point.y);n+s<o&&(o=n+s,i=e)}e.push({firstIndex:i,indexCross:a,point:{x:this.crossedArr[a]._point.x,y:this.crossedArr[a]._point.y}}),t[i].cross=!0,t[i].crossIndex=a}for(let a=0;a<this.crossedArr.length;a++){let o=1e4,i=null,s=!0;for(let e=0;e<t.length;e++)if(s=!0,t[e+1]&&t[e+1].cross&&(s=!1),t[e-1]&&t[e-1].cross&&(s=!1),!t[e].cross&&s){let s=Math.abs(t[e].x-this.crossedArr[a]._point.x),n=Math.abs(t[e].y-this.crossedArr[a]._point.y);n+s<o&&(o=n+s,i=e)}t[i]&&(t[i].crossDouble=!0,t[i].crossIndex=a,e.find((t=>t.indexCross==a)).secondIndex=i)}for(let a=0;a<e.length;a++)e[a].count=Math.abs(e[a].firstIndex-e[a].secondIndex);let o=JSON.parse(JSON.stringify(t));o.reverse(),e.push({count:o.indexOf(o.find((t=>void 0!==t.crossIndex)))+t.indexOf(t.find((t=>void 0!==t.crossIndex))),end:t.length-o.indexOf(o.find((t=>void 0!==t.crossIndex)))-1,start:t.indexOf(t.find((t=>void 0!==t.crossIndex)))});let i=1/0,s=null;for(let a=0;a<e.length;a++)e[a].count<i&&(i=e[a].count,s=a);let n=JSON.parse(JSON.stringify(t));s==e.length-1?(console.log("хвостик"),n.splice(0,e[e.length-1].start+1),n.splice(e[e.length-1].end-e[e.length-1].start,1e4)):(console.log("петля"),n.splice(Math.min(e[s].firstIndex,e[s].secondIndex),i+1,e[s].point)),this.FinArr=n,self.path=new Nt.Path;for(let a=0;a<this.FinArr.length;a++)self.path.add(new Nt.Point(this.FinArr[a].x,this.FinArr[a].y));return self.path.closed=!0,this.crossedArr=self.path.getCrossings(self.path),0==this.crossedArr.length||1==this.crossedArr.length&&this.crossedArr[0]._point.x==this.FinArr[this.FinArr.length-1].x&&this.crossedArr[0]._point.y==this.FinArr[this.FinArr.length-1].y?console.log("last"):(this.loop++,this.cutCrossings(this.FinArr)),n},getCrossIndex(t,e,o){let i=1e4,s=null;for(let n=0;n<t.length;n++){let a=Math.abs(t[n].x-e),r=Math.abs(t[n].y-o);r+a<i&&(i=r+a,s=n)}return s},reset(){this.scope.project.activeLayer.removeChildren()},pathCreate(t){return t.activate(),new Nt.Path({strokeColor:"rgb(77,77,77)",strokeJoin:"round",strokeWidth:2})},createTool(t){return t.activate(),new Nt.Tool},mouseDown(){let t=this;this.dragMode||(this.path,this.tool=this.createTool(this.scope)),this.tool.onMouseDown=e=>{if(this.strokeScaleNumber=null,this.cornerScale=null,this.currentRotationPant=null,this.dragMode)if(this.scaleMode){this.path2=null;let t=this.scope.project.hitTest(e.point,this.hitOptions);console.log(t),!t||"stroke"!=t.type&&"segment"!=t.type&&"fill"!=t.type||"topRightRot"!=t.item.name&&"bottomRightRot"!=t.item.name&&"bottomLeftRot"!=t.item.name&&"topLeftRot"!=t.item.name?t&&"stroke"==t.type&&"csaleRectangle"==t.item.name?(this.strokeScaleNumber=t.item.curves.findIndex((e=>e.point1.x==t.location.curve.point1.x&&e.point1.y==t.location.curve.point1.y)),this.path2=this.scope.project._children[0]._children.find((t=>"Path"==t.className))):t&&"fill"==t.type&&(this.path2=t.item):(console.log(t),this.currentRotationPant=t.item.name,console.log(this.scope.project._children[0]._children),this.path2=this.scope.project._children[0]._children.find((t=>"Path"==t.className&&!t.name)),console.log(this.path2));let o=this.scope.project.activeLayer.children.filter((t=>"bottomLeft"==t.name||"bottomRight"==t.name||"topLeft"==t.name||"topRight"==t.name)),i=null,s=1e4;for(let n=0;n<o.length;n++){let t=Math.abs(e.point.x-o[n].position.x),a=Math.abs(e.point.y-o[n].position.y);a+t<s&&(s=a+t,i=n)}if(s<40){let t=o[i];this.cornerScale=t.name,this.path2=this.scope.project._children[0]._children.find((t=>"Path"==t.className))}this.path2||(this.changeScale(),this.deleteRotationArrows())}else{this.segment=null,this.path2=null,this.segmentDot=null,this.segmentPointNumber=0;let t=this.scope.project.hitTest(e.point,this.hitOptions);if(!t&&this.curveEditorMode)return void this.curveEditorHandler();if(e.modifiers.shift)return void("segment"==t.type&&t.segment.remove());if(t){if(this.path2=t.item,("fill"==t.type||"circle"==t.item._type)&&(this.path2=this.scope.project._children[0]._children.find((t=>"Path"==t.className)),"circle"==t.item._type))if(3==t.item.radius){let e=null,o=1e4;for(let i=0;i<this.path2._segments.length;i++){let s=Math.abs(t.item.position.x-this.path2._segments[i].curve.points[1].x),n=Math.abs(t.item.position.y-this.path2._segments[i].curve.points[1].y);n+s<o&&(o=n+s,this.segmentPointNumber=1,e=i),s=Math.abs(t.item.position.x-this.path2._segments[i].curve.points[2].x),n=Math.abs(t.item.position.y-this.path2._segments[i].curve.points[2].y),n+s<o&&(o=n+s,this.segmentPointNumber=2,e=i)}this.segmentDot=this.path2._segments[e]}else{let e=null,o=1e4;for(let i=0;i<this.path2._segments.length;i++){let s=Math.abs(t.item.position.x-this.path2._segments[i].point.x),n=Math.abs(t.item.position.y-this.path2._segments[i].point.y);n+s<o&&(o=n+s,e=i)}this.segment=this.path2._segments[e]}if("segment"==t.type)this.segment=t.segment;else if("stroke"==t.type&&"circle"!=t.item._type){console.log(t);let o=t.location;this.segment=this.path2.insert(o.index+1,e.point)}}this.movePath="fill"==t.type,this.movePath&&this.scope.project.activeLayer.addChild(t.item)}else t.path=t.pathCreate(t.scope),t.path.add(e.point)},this.tool.onMouseMove=t=>{this.scaleMode&&(this.deleteRotationArrows(),this.drawRotationArrow(t)),this.toNormalSizeChildren();let e=this.scope.project.hitTest(t.point,this.hitOptions);e&&"circle"==e.item.type&&10==e.item.radius?this.scope.project._children[0]._children.find((t=>t.id==e.item.id)).radius=15:e&&"stroke"==e.type&&!this.scaleMode&&(this.scope.project._children[0]._children.find((t=>"Path"==t.className)).strokeWidth=3)},this.tool.onMouseDrag=e=>{if(this.deletePathCircles(),this.deleteMiniPathCircles(),this.curveEditorMode&&(t.path.fullySelected=!0),this.dragMode)if(this.scaleMode){if(this.cornerScale){switch(this.cornerScale){case"topRight":(e.delta.x>0&&e.delta.y<0||e.delta.x<0&&e.delta.y>0)&&(e.delta.x>0?this.path2.scale(1.01,1):this.path2.scale(.99,1),e.delta.y<0?this.path2.scale(1,1.01):this.path2.scale(1,.99));break;case"topLeft":(e.delta.x>0&&e.delta.y>0||e.delta.x<0&&e.delta.y<0)&&(e.delta.y<0?this.path2.scale(1,1.02):this.path2.scale(1,.98),e.delta.x<0?this.path2.scale(1.02,1):this.path2.scale(.98,1));break;case"bottomRight":(e.delta.x>0&&e.delta.y>0||e.delta.x<0&&e.delta.y<0)&&(e.delta.y>0?this.path2.scale(1,1.02):this.path2.scale(1,.98),e.delta.x>0?this.path2.scale(1.02,1):this.path2.scale(.98,1));break;case"bottomLeft":(e.delta.x>0&&e.delta.y<0||e.delta.x<0&&e.delta.y>0)&&(e.delta.x<0?this.path2.scale(1.02,1):this.path2.scale(.98,1),e.delta.y>0?this.path2.scale(1,1.02):this.path2.scale(1,.98));break}this.deleteScaleRectangle(),this.drawScaleRectangle(),console.log("444444444444444"),this.deleteRotationArrows(),this.drawRotationArrow(e)}else if(this.path2&&null===this.strokeScaleNumber)if(this.currentRotationPant){console.log(e.point.x),console.log(e.point.y),console.log("----------"),console.log(this.path2.bounds.center.x);let t=this.scope.project._children[0]._children["csaleRectangle"],o=this.scope.project._children[0]._children.find((t=>"topRightRot"==t.name||"topLeftRot"==t.name||"bottomRightRot"==t.name||"bottomLeftRot"==t.name)),i=this.scope.project._children[0]._children["topRight"],s=this.scope.project._children[0]._children["topLeft"],n=this.scope.project._children[0]._children["bottomRight"],a=this.scope.project._children[0]._children["bottomLeft"];e.point.x<this.path2.bounds.center.x&&e.point.y>this.path2.bounds.center.y?e.delta.x<0||e.delta.y<0?(this.path2.rotate(1.3),o.rotate(1.3,this.path2.bounds.center),t.rotate(1.3,this.path2.bounds.center),a.rotate(1.3,this.path2.bounds.center),n.rotate(1.3,this.path2.bounds.center),s.rotate(1.3,this.path2.bounds.center),i.rotate(1.3,this.path2.bounds.center)):(this.path2.rotate(-1.3),o.rotate(-1.3,this.path2.bounds.center),t.rotate(-1.3,this.path2.bounds.center),a.rotate(-1.3,this.path2.bounds.center),n.rotate(-1.3,this.path2.bounds.center),s.rotate(-1.3,this.path2.bounds.center),i.rotate(-1.3,this.path2.bounds.center)):e.point.y>this.path2.bounds.center.y?e.delta.x<0||e.delta.y>0?(this.path2.rotate(1.3),o.rotate(1.3,this.path2.bounds.center),t.rotate(1.3,this.path2.bounds.center),a.rotate(1.3,this.path2.bounds.center),n.rotate(1.3,this.path2.bounds.center),s.rotate(1.3,this.path2.bounds.center),i.rotate(1.3,this.path2.bounds.center)):(this.path2.rotate(-1.3),o.rotate(-1.3,this.path2.bounds.center),t.rotate(-1.3,this.path2.bounds.center),a.rotate(-1.3,this.path2.bounds.center),n.rotate(-1.3,this.path2.bounds.center),s.rotate(-1.3,this.path2.bounds.center),i.rotate(-1.3,this.path2.bounds.center)):e.point.x<this.path2.bounds.center.x?e.delta.x>0||e.delta.y<0?(this.path2.rotate(1.3),o.rotate(1.3,this.path2.bounds.center),t.rotate(1.3,this.path2.bounds.center),a.rotate(1.3,this.path2.bounds.center),n.rotate(1.3,this.path2.bounds.center),s.rotate(1.3,this.path2.bounds.center),i.rotate(1.3,this.path2.bounds.center)):(this.path2.rotate(-1.3),o.rotate(-1.3,this.path2.bounds.center),t.rotate(-1.3,this.path2.bounds.center),a.rotate(-1.3,this.path2.bounds.center),n.rotate(-1.3,this.path2.bounds.center),s.rotate(-1.3,this.path2.bounds.center),i.rotate(-1.3,this.path2.bounds.center)):e.delta.x>0||e.delta.y>0?(this.path2.rotate(1.3),o.rotate(1.3,this.path2.bounds.center),t.rotate(1.3,this.path2.bounds.center),a.rotate(1.3,this.path2.bounds.center),n.rotate(1.3,this.path2.bounds.center),s.rotate(1.3,this.path2.bounds.center),i.rotate(1.3,this.path2.bounds.center)):(this.path2.rotate(-1.3),o.rotate(-1.3,this.path2.bounds.center),t.rotate(-1.3,this.path2.bounds.center),a.rotate(-1.3,this.path2.bounds.center),n.rotate(-1.3,this.path2.bounds.center),s.rotate(-1.3,this.path2.bounds.center),i.rotate(-1.3,this.path2.bounds.center))}else this.path2.position.x+=e.delta.x,this.path2.position.y+=e.delta.y,this.deleteScaleRectangle(),this.drawScaleRectangle(),this.deleteRotationArrows(),this.drawRotationArrow(e);else if(null!==this.strokeScaleNumber){switch(this.strokeScaleNumber){case 0:e.delta.x<0?this.path2.scale(1.03,1):this.path2.scale(.97,1);break;case 1:e.delta.y<0?this.path2.scale(1,1.04):this.path2.scale(1,.97);break;case 2:e.delta.x>0?this.path2.scale(1.03,1):this.path2.scale(.97,1);break;case 3:e.delta.y>0?this.path2.scale(1,1.04):this.path2.scale(1,.97);break}this.deleteScaleRectangle(),this.drawScaleRectangle()}}else this.segmentDot?(1==this.segmentPointNumber?(this.segmentDot.curve.handle1.x+=e.delta.x,this.segmentDot.curve.handle1.y+=e.delta.y):2==this.segmentPointNumber&&(this.segmentDot.curve.handle2.x+=e.delta.x,this.segmentDot.curve.handle2.y+=e.delta.y),console.log(this.segmentDot.curve.points[2])):this.segment?(this.segment.point.x+=e.delta.x,this.segment.point.y+=e.delta.y):this.path2&&(this.path2.position.x+=e.delta.x,this.path2.position.y+=e.delta.y);else t.path.add(e),t.path.fillColor="#efefef",this.crossedArr.length&&(this.crossed=!0)},this.tool.onMouseUp=()=>{let t=this;if(this.dragMode)this.scaleMode&&(this.deleteScaleRectangle(),this.drawScaleRectangle()),this.simpArr=this.scope.project._children[0]._children.find((t=>"Path"==t.className)).pathData,this.currentIndex!=this.pathHistory.length-1&&this.pathHistory.splice(this.currentIndex+1,1/0),this.pathHistory.push({data:this.scope.project._children[0]._children.find((t=>"Path"==t.className)).pathData}),this.currentIndex=this.pathHistory.length-1,console.log("HISTORY"),console.log(this.scope.project._children[0]._children.find((t=>"Path"==t.className)));else{t.path.add(new Nt.Point(t.path.curves[0].point1._x,t.path.curves[0].point1._y)),this.crossedArr=t.path.getCrossings(t.path);let e=[];for(let o=0;o<t.path.curves.length;o++)for(let i=0;i<t.path.curves[o].points.length;i++)e[e.length-1]&&e[e.length-1].x==t.path.curves[o].points[i].x&&e[e.length-1].y==t.path.curves[o].points[i].y||e.push({x:t.path.curves[o].points[i].x,y:t.path.curves[o].points[i].y});this.crossedArr.length?this.cutCrossings(e):this.FinArr=e,this.$emit("clearCanvas"),t.path=new Nt.Path,t.path.strokeColor="black";for(let o=0;o<this.FinArr.length;o++)t.path.add(new Nt.Point(this.FinArr[o].x,this.FinArr[o].y));t.path.closed=!0,t.path.fillColor={hue:360*Math.random(),saturation:1,lightness:.4*(Math.random()-.5)+.4},t.path.simplify(30),this.simpArr=this.scope.project._children[0]._children.find((t=>"Path"==t.className)).pathData,this.currentIndex!=this.pathHistory.length-1&&this.pathHistory.splice(this.currentIndex+1,1/0),this.pathHistory.push({data:this.scope.project._children[0]._children.find((t=>"Path"==t.className)).pathData}),this.currentIndex=this.pathHistory.length-1,console.log("HISTORY"),console.log(this.scope.project._children[0]._children.find((t=>"Path"==t.className))),console.log(this.scope.project._children[0]._children.find((t=>"Path"==t.className))),this.pathExtra=t.path}this.deletePathCircles(),this.curveEditorMode?this.drawCirclesCurves():this.drawCircles()}}},mounted(){this.scope=new Nt.PaperScope,this.scope.setup(this.canvasId),console.log(document.body.clientWidth)},watch:{clear(){this.currentArr=[],this.finishArr=[]},simpValue(t,e){this.scope.project._children[0]._children.find((t=>"Path"==t.className))&&(this.pathHistory.push({data:this.scope.project._children[0]._children.find((t=>"Path"==t.className)).pathData,simplify:!0}),this.currentIndex++,this.simpArr=this.pathHistory[this.pathHistory.length-1].data,this.$emit("clearSimp"),self.path=new Nt.Path(this.simpArr),self.path.strokeColor="black",self.path.fillColor="red",t>e?(self.path.flatten(1),self.path.simplify()):self.path.flatten(40/t),this.pathHistory.push({data:this.scope.project._children[0]._children.find((t=>"Path"==t.className)).pathData,simplify:!0}),this.currentIndex++,this.drawCircles())}}};const zt=(0,l.Z)(Tt,[["render",jt],["__scopeId","data-v-166da094"]]);var Ft=zt,Ot={name:"MasterPaper",data:()=>({canDraw:!0,clear:!1}),props:{externalPathCurveCall:Boolean},methods:{setPathCurveExternal(t){this.$emit("setPathCurveExternal",t)},changeIndex(t){this.$emit("changeIndex",1,t)},reset(){this.canDraw=!1,this.$refs.childCanvas.reset(),this.simpValue=2,this.clear=!this.clear},clearHandler(){this.canDraw=!0,this.$refs.childCanvas.reset(),this.simpValue=2,this.clear=!this.clear},clearSimp(){this.$refs.childCanvas.reset()}},components:{CanvasPaper:Ft}};const Bt=(0,l.Z)(Ot,[["render",yt]]);var Ut=Bt,$t={name:"DrawPage",data:()=>({pathCurve:null,pathCurveExternal:null,externalPathCurveCall:!1}),components:{masterPaper:Ut,mainWrap:vt},methods:{externalPathCall(){this.externalPathCurveCall=!0},setPathCurveExternal(t){console.log(t),this.pathCurveExternal=t},setActiveItem(t,e){this.pathCurve=e,this.$refs.carousel.setActiveItem(t)}}};const Zt=(0,l.Z)($t,[["render",B]]);var Vt=Zt,Yt=(0,d.p7)({history:(0,d.PO)(),routes:[{path:"/",component:N},{path:"/draw",component:Vt}]}),Gt=o(3765),Jt=o(2748);const qt=(0,i.ri)(c);qt.use(Yt),qt.use(Gt.Z);for(const[Xt,Kt]of Object.entries(Jt))qt.component(Xt,Kt);qt.mount("#app")},858:function(){},4158:function(){}},e={};function o(i){var s=e[i];if(void 0!==s)return s.exports;var n=e[i]={exports:{}};return t[i].call(n.exports,n,n.exports,o),n.exports}o.m=t,function(){var t=[];o.O=function(e,i,s,n){if(!i){var a=1/0;for(c=0;c<t.length;c++){i=t[c][0],s=t[c][1],n=t[c][2];for(var r=!0,l=0;l<i.length;l++)(!1&n||a>=n)&&Object.keys(o.O).every((function(t){return o.O[t](i[l])}))?i.splice(l--,1):(r=!1,n<a&&(a=n));if(r){t.splice(c--,1);var h=s();void 0!==h&&(e=h)}}return e}n=n||0;for(var c=t.length;c>0&&t[c-1][2]>n;c--)t[c]=t[c-1];t[c]=[i,s,n]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var i in e)o.o(e,i)&&!o.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){o.p="/mirror/"}(),function(){var t={143:0};o.O.j=function(e){return 0===t[e]};var e=function(e,i){var s,n,a=i[0],r=i[1],l=i[2],h=0;if(a.some((function(e){return 0!==t[e]}))){for(s in r)o.o(r,s)&&(o.m[s]=r[s]);if(l)var c=l(o)}for(e&&e(i);h<a.length;h++)n=a[h],o.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return o.O(c)},i=self["webpackChunkhello_world"]=self["webpackChunkhello_world"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=o.O(void 0,[998],(function(){return o(5648)}));i=o.O(i)})();
//# sourceMappingURL=app.d9ae0c77.js.map